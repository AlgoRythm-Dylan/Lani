const Lani=window.Lani||{};Lani.version="0.1.0",Lani.installedModules=[],Lani.contentRoot="/lani",Lani.shadowLinks=["/fontawesome/fontawesome.min.css","/fontawesome/solid.min.css"],Lani.templatesPath=()=>Lani.contentRoot+"/templates.html",Lani.requireModule=e=>{if(!Lani.installedModules.includes(e))throw"[Lani] A dependency was not met: "+e},Lani.removeClass=(e,t)=>{e.className=e.className.split(" ").filter(e=>e!=t).join(" ")},Lani.create=(e,t={})=>{let i=document.createElement(e);if(t.className&&(i.className=t.className),t.id&&(i.id=t.id),t.src&&(i.src=t.src),t.innerHTML&&(i.innerHTML=t.innerHTML),t.attrs)for(var[n,a]of Object.entries(t.attrs))i.setAttribute(n,a);return t.parent&&t.parent.appendChild(i),t.slot&&i.setAttribute("slot",t.slot),i},Lani.c=(e,t,i,n)=>((n=n||{}).className=t,n.parent=i,Lani.create(e,n)),Lani.templateRepository={},Lani.loadTemplate=async(e,t)=>{let i=Lani.templateRepository[e];return i||(i=await(await fetch(e)).text(),i=(new DOMParser).parseFromString(i,"text/html"),Lani.templateRepository[e]=i),i.querySelector(t)},Lani.ElementEvents={Ready:"lani::ready",Close:"lani::close",Show:"lani::show",StateChange:"lani::state-change"},Lani.Element=class extends HTMLElement{constructor(e=!0,t={}){super(),this.usesShadow=e,void 0===t.mode&&(t.mode="closed"),this.shadow=e?this.attachShadow(t):this,this.importLaniLibs()}linkStyles(e){e.forEach(e=>{Lani.create("link",{parent:this.shadow,attrs:{href:e,rel:"stylesheet",type:"text/css"}})})}linkStyle(e){this.linkStyles([e])}importLaniLibs(){this.usesShadow&&(this.linkStyles([Lani.contentRoot+"/lani.css"]),this.linkStyles(Lani.shadowLinks))}useDOMTemplate(e,t=!0){let i=document.getElementById(e);this.shadow.appendChild(i.content.cloneNode(!0)),t&&this.ready()}async useTemplate(e,t,i=!0){let n=await Lani.loadTemplate(e,t);this.shadow.appendChild(n.content.cloneNode(!0)),i&&this.ready()}async useDefaultTemplate(e,t=!0){await this.useTemplate(Lani.templatesPath(),"#"+e,t)}emit(e,t={}){this.dispatchEvent(new CustomEvent(e,{detail:t}))}ready(e={}){this.emit(Lani.ElementEvents.Ready,e)}setupNonDOM(){this.setAttribute("lani-declarative","true")}getIntAttribute(e){return this.getAttribute(e)?parseInt(e):null}getFloatAttribute(e){return this.getAttribute(e)?parseFloat(e):null}getBoolAttribute(e,t=!1){let i=this.getAttribute(e);return null===i?t:"true"===i.toLowerCase()}},Lani.waitForElement=i=>new Promise(e=>{let t=document.createElement(i);t.addEventListener(Lani.ElementEvents.Ready,()=>e(t))}),Lani.regEl=(e,t,i)=>{customElements.define(e,t,i)},Lani.Direction={Left:"left",Right:"right"},Lani.Position={Start:"start",Middle:"middle",End:"end",Absolute:"abs"},Lani.positionElement=(e,t,i,n=0,a=0)=>{t&&(t==Lani.Position.Start?e.style.left="0px":t==Lani.Position.Middle?e.style.left=n+(e.parentNode.offsetWidth/2-e.offsetWidth/2)+"px":t==Lani.Position.End?e.style.left=n+(e.parentNode.offsetWidth-e.offsetWidth)+"px":t==Lani.Position.Absolute&&(e.style.left=n+"px")),i&&(i==Lani.Position.Start?e.style.top="0px":i==Lani.Position.Middle?e.style.top=a+(e.parentNode.offsetHeight/2-e.offsetHeight/2)+"px":i==Lani.Position.End?e.style.top=a+(e.parentNode.offsetHeight-e.offsetHeight)+"px":i==Lani.Position.Absolute&&(e.style.top=a+"px"))},Lani.downloadBlob=(e,t)=>{let i=Lani.c("a");i.href=URL.createObjectURL(e),i.download=t,i.click()},Lani.getLaniElements=e=>{let t=[];for(var i of e.children)i.tagName.startsWith("LANI-")&&t.push(i);return t},Lani.useGenericTemplate=(e,t,i=!0)=>{null!==e&&("string"==typeof e?i?t.innerHTML+=e:t.innerHTML=e:(i||(t.innerHTML=""),void 0!==e.content?t.appendChild(e.content.cloneNode(!0)):t.appendChild(e)))},Lani.objectLoad=(e,t,i)=>{var n,i=i.destination??new t;for(n of Object.entries(i))"undefined"!=typeof e[n.key]&&(dest[n.key]=e[n.key]);return i},Lani.Font=class{constructor(){this.weight=null,this.isItalic=!1,this.isUnderlined=!1,this.family=null,this.size=null}apply(e){null!==this.weight&&(e.style.fontWeight=this.weight),!0===this.isItalic&&(e.style.fontStyle="italic"),!0===this.isUnderlined&&(e.style.textDecoration="underline"),null!==this.family&&(e.style.fontFamily=this.family),null!==this.size&&(e.style.fontSize=Lani.genericDimension(this.size))}get isBold(){return 700===this.weight}set isBold(e){this.weight=!0===e?700:null}},Lani.Corners=class{constructor(e=0){this.all=e}set all(e){this.topLeft=e,this.topRight=e,this.bottomLeft=e,this.bottomRight=e}applyToBorderRadius(e){null!==this.topLeft&&(e.style.borderTopLeftRadius=Lani.genericDimension(this.topLeft)),null!==this.topRight&&(e.style.borderTopRightRadius=Lani.genericDimension(this.topRight)),null!==this.bottomRight&&(e.style.borderBottomRightRadius=Lani.genericDimension(this.bottomRight)),null!==this.bottomLeft&&(e.style.borderBottomLeftRadius=Lani.genericDimension(this.bottomLeft))}},Lani.Dimension=class{constructor(e=0){this.all=e}set all(e){this.top=e,this.bottom=e,this.left=e,this.right=e}applyToMargin(e){e.style.marginTop=Lani.genericDimension(this.top),e.style.marginBottom=Lani.genericDimension(this.bottom),e.style.marginLeft=Lani.genericDimension(this.left),e.style.marginRight=Lani.genericDimension(this.right)}applyToPadding(e){e.style.paddingTop=Lani.genericDimension(this.top),e.style.paddingBottom=Lani.genericDimension(this.bottom),e.style.paddingLeft=Lani.genericDimension(this.left),e.style.paddingRight=Lani.genericDimension(this.right)}applyToBorder(e){e.style.borderTopWidth=Lani.genericDimension(this.top),e.style.borderBottomWidth=Lani.genericDimension(this.bottom),e.style.borderLeftWidth=Lani.genericDimension(this.left),e.style.borderRightWidth=Lani.genericDimension(this.right)}get isNone(){return!(null!==this.top&&0!==this.top||null!==this.bottom&&0!==this.bottom||null!==this.left&&0!==this.left||null!==this.right&&0!==this.right)}},Lani.genericDimension=(e,t="px")=>"number"==typeof e?""+e+t:e,Lani.coalescedPropertyGet=(e,t,i=!0)=>{for(obj of e){var n=obj[t];if(void 0!==n&&i&&null!==n)return n}return null},Lani.cPG=Lani.coalescedPropertyGet,Lani.coalescedObjectGet=(e,t,i=!0)=>{var n;for(n of Object.keys(e))e[n]=Lani.coalescedPropertyGet([e,...t],n,i);return e},Lani.cOG=Lani.coalescedObjectGet,Lani.typedCoalescedObjectGet=(e,t,i=!0,n=null)=>Lani.objectLoad(Lani.coalescedObjectGet(e,i),t,n),Lani.tCOG=Lani.typedCoalescedObjectGet,Lani.installedModules.push("lani-data"),Lani.DataSetExporters={},Lani.DataSetExporter=class{constructor(e,t="download"){this.dataSet=e,this.fileName=t}async export(){}finish(e){Lani.downloadBlob(e,this.fileName)}},Lani.CSVDataSetExporter=class extends Lani.DataSetExporter{constructor(e,t="download.csv"){super(e,t)}async export(){}},Lani.DataSetExporters["text/csv"]=Lani.CSVDataSetExporter,Lani.DataRow=class{constructor(e){this.data=e}},Lani.groupDataSetRecursive=(e,t)=>{if(0===t.length)return e;let i=t.slice();var n,a=i.shift();let s={};for(n of e.rows){var r=n.data[a];void 0===s[r]&&(s[r]=[]),s[r].push(n.data)}if(e.groupKey=a,e.rows=Object.keys(s).map(e=>{let t=Lani.DataSet.from(s[e]);return t.groupValue=e,t}),0!==i.length)for(var o of e.rows)Lani.groupDataSetRecursive(o,i);return e},Lani.DataSet=class{constructor(){this.rows=[],this.groupKey=null,this.groupValue=null}static from(e){let t=new Lani.DataSet;for(var i of e)t.rows.push(new Lani.DataRow(i));return t}slice(e,t){let i=new Lani.DataSet;return i.isGrouped=this.isGrouped,i.rows=this.rows.slice(e,t),i}toArray(){}filter(e){for(var t of e)for(let e=0;e<this.rows.length;e++)t.meetsCondition(this.rows[e].data)||this.removeAt(e--)}group(e){Lani.groupDataSetRecursive(this,e)}sort(e){}at(e){return this.rows[e]}removeAt(e){this.rows.splice(e,1)}get isGrouped(){return null!==this.groupKey}get isAGroup(){return null!==this.groupValue}get length(){return this.rows.length}get count(){return this.isGrouped?this.rows.reduce((e,t)=>e+t.count,0):this.rows.length}async export(e,t){let i=Lani.DataSetExporters[t];if(!n)throw"No export generator found for file type "+t;let n=new i(this,e);await n.export()}},Lani.Filter=class{constructor(){this.column=null,this.value=null}meetsCondition(e){return e[this.column]===this.value}},Lani.SortDirection={Asc:"Ascending",Desc:"Descending"},Lani.Sort=class{constructor(e,t=null){this.column=e,this.direction=t??Lani.SortDirection.Desc}},Lani.Paginator=class{constructor(){this.page=1,this.itemsPerPage=10,this.scroll=0,this.enabled=!0,this.count=null}get indices(){var e=this.scroll+(this.page-1)*this.itemsPerPage;let t=this.scroll+this.page*this.itemsPerPage;return{start:e,end:t=null!==this.count&&t>this.count?this.count:t}}get pages(){return null===this.count?null:Math.ceil(this.count/this.itemsPerPage)}},Lani.DataSourceReturnType={Array:"Array",DataSet:"DataSet"},Lani.DataSource=class{constructor(){this.filters=[],this.groups=[],this.sorts=[],this.paginator=new Lani.Paginator,this.paginator.enabled=!1}async update(){}async get(){}},Lani.InMemoryDataSource=class extends Lani.DataSource{constructor(e){super(),this.paginator.enabled=!1,this.array=e,this.product=null}async get(){if(null===this.product)return null;if(null===this.paginator||!this.paginator.enabled)return this.product;var e=this.paginator.indices;return this.product.slice(e.start,e.end)}setArray(e){this.array=e,this.update()}async update(){return this.product=Lani.DataSet.from(this.array),this.product.filter(this.filters),this.product.group(this.groups),this.product.sort(this.sorts),this.returnType===Lani.DataSourceReturnType.Array&&(this.product=this.product.toArray()),this.paginator.length=this.product.length,this.product}},Lani.DownloadedDataSource=class extends Lani.DataSource{constructor(e=null){super(),this.source=e,this.fetchOptions={},this.inMem=new Lani.InMemoryDataSource}set groups(e){this.inMem&&(this.inMem.groups=e)}get groups(){if(this.inMem)return this.inMem.groups}async update(){await this.inMem.update()}async get(){return null===await this.inMem.get()&&await this.download(),this.inMem.get()}async download(){if(null===this.source)throw"Tried to download from a null source";this.inMem.setArray(await(await fetch(this.source,this.fetchOptions)).json())}},Lani.DataElement=class extends Lani.Element{constructor(){super()}},Lani.DataDisplayGrouping=class{constructor(){this.elements=[]}connect(e){this.elements.push(e)}disconnect(t){this.elements=this.elements.filter(e=>e!==t)}},Lani.group=(t,e)=>{if(0===e.length)return t;let i={};var n=e.shift();for(let e=0;e<t.length;e++){var a=t[e][n];i[a]?i[a].push(t.slice(e,e+1)[0]):i[a]=t.slice(e,e+1)}if(e.length)for([key,value]of Object.entries(i))i[key]=Lani.group(value,e.slice());return i},Lani.ungroup=e=>{let t=[];return Array.isArray(e)?t.push(...e.slice()):Object.values(e).forEach(e=>{t.push(...Lani.ungroup(e))}),t},Lani.initCap=e=>"string"!=typeof e||0===e.length?e:e.includes(" ")?Lani.search.splitWords(e).map(Lani.initCap).join(" "):e[0].toLocaleUpperCase()+e.substring(1).toLocaleLowerCase(),Lani.containsLowercaseLetters=e=>e!==e.toLocaleUpperCase(),Lani.undoCamelCase=e=>"string"!=typeof e||0===e.length?e:e.includes(" ")?Lani.search.splitWords(e).map(Lani.undoCamelCase).join(" ").toLocaleLowerCase():Lani.containsLowercaseLetters(e)?e.split(/(?=[A-Z])/g).join(" ").toLocaleLowerCase():e,Lani.DataNamePrettifier=class{constructor(){this.enabled=!0,this.replaceUnderscoreWithSpace=!0,this.undoCamelCase=!0,this.normalizeCasing=!0}prettify(e){if(!1===this.enabled)return e;let t=e;return this.replaceUnderscoreWithSpace&&(t=t.replaceAll("_"," ")),this.undoCamelCase&&(t=Lani.undoCamelCase(t)),t=this.normalizeCasing?Lani.initCap(t):t}},Lani.prettifyDataName=(e,t={})=>{let i=new Lani.DataNamePrettifier;return Object.assign(i,t),i.prettify(e)},Lani.search={},Lani.search.exact=(t,e)=>e.filter(e=>e===t),Lani.search.includes=(e,i,t=!0)=>{if(t){let t=e.toLowerCase();return i.filter(e=>e.toLowerCase().includes(t))}},Lani.search.splitWords=e=>e.match(/\b(\w+)'?(\w+)?\b/g),Lani.search.levenshtein=(e,t)=>0===e.length?t.length:0===t.length?e.length:e[0]===t[0]?Lani.search.levenshtein(Lani.search.levenshteinTail(e),Lani.search.levenshteinTail(t)):1+Math.min(Lani.search.levenshtein(Lani.search.levenshteinTail(e),t),Lani.search.levenshtein(e,Lani.search.levenshteinTail(t)),Lani.search.levenshtein(Lani.search.levenshteinTail(e),Lani.search.levenshteinTail(t))),Lani.search.levenshteinTail=e=>e.slice(1),Lani.installedModules.push("lani-context"),Lani.customContextMenu=(e,t,i,s=!1)=>{let r=!1;for(let e=0;e<t.length;e++)if(null!==t[e].icon){r=!0;break}e.addEventListener("contextmenu",e=>{e.preventDefault();let n=new Lani.ContextElement,a=document.createElement("div");a.className="l-context-element",n.containerElement=a;for(let e=0;e<t.length;e++){let i=t[e];if(i.isSeparator){let e=document.createElement("div");e.className="l-context-element-item-separator",a.appendChild(e)}else{let e=document.createElement("p"),t=(e.className=s?"l-context-element-item-compact":"l-context-element-item",i.text);r&&(t=null!==i.icon?`<i class="${i.icon} l-context-element-item-icon"></i>`+t:'<div class="l-context-element-item-icon"></div>'+t),e.innerHTML=t,e.addEventListener("click",e=>{i.onAction&&i.onAction(),n.close()}),a.appendChild(e)}}return i&&i(n.containerElement,n),a.style.top=e.layerY+"px",a.style.left=e.layerX+"px",document.body.appendChild(a),n.addListeners(),n})},Lani.ContextElement=class{constructor(e=null){this.containerElement=e,this.relatedElements=[],this.autoClose=!0,this.mousedownListener=e=>this.handleWindowEvent(e),this.scrollListener=e=>this.handleWindowEvent(e),this.blurListener=e=>this.handleWindowEvent(e),this.onClickAway=null,this.onClose=null}addListeners(){window.addEventListener("mousedown",this.mousedownListener),window.addEventListener("scroll",this.scrollListener),window.addEventListener("blur",this.blurListener)}removeListeners(){window.removeEventListener("mousedown",this.mousedownListener),window.removeEventListener("scroll",this.scrollListener),window.removeEventListener("blur",this.blurListener)}handleWindowEvent(t){t=t.target;if(t!==this.containerElement){let e=t;for(;e=e.parentNode;)if(e===this.containerElement||-1!==this.relatedElements.indexOf(e))return;this.onClickAway&&this.onClickAway(),this.autoClose&&this.close()}}close(){let e=null;this.onClose&&(e=this.onClose()),"undefined"!=typeof cancel&&!1===e||(this.removeListeners(),this.containerElement&&this.containerElement.remove())}},Lani.ContextMenuItem=class{constructor(e,t=null,i=null){this.text=e,this.icon=i,this.isSeparator=!1,this.onAction=t}},Lani.ContextMenuSeparator=class extends Lani.ContextMenuItem{constructor(){super(),this.isSeparator=!0}},Lani.installedModules.push("lani-extras"),Lani.GibberishLength={Short:2,Medium:15,Long:100,VeryLong:200},Lani.GibberishText=["apple","mint","Florida","soda","leather","the","a","to","bubblegum","bravery","environment","tea","water","cake","chicken","wave","ice","lamp","sheep","whereas","windy","tall","tree","lock","finished","image","daytime","of","work","cow","door","coin","by","blue","half","red","stone","inside","loud","frozen","happy","scared","burnt","bread","slide","increase","taste"],Lani.gibberish=t=>{let i=[];for(let e=0;e<t;e++)i.push(Lani.GibberishText[Math.floor(Math.random()*Lani.GibberishText.length)]);return i.join(" ")},Lani.installedModules.push("lani-animations"),Lani.animations=[],Lani.previousTime=null,Lani.windowBlurred=!1,Lani.randomSign=()=>{return Math.random()<.5?-1:1},Lani.animationWindowBlurHandler=e=>{Lani.previousTime=null,Lani.windowBlurred=!0},Lani.animationWindowFocusHandler=e=>{Lani.windowBlurred=!1},Lani.animationLoadHandler=e=>{Lani.startAnimationLoop()},Lani.animate=e=>{if(!Lani.windowBlurred){let t=0;1e3<(t=null!==Lani.previousTime?e-Lani.previousTime:t)&&(t=1e3),Lani.previousTime=e,Lani.animations.forEach(e=>e.animate(t))}requestAnimationFrame(Lani.animate)},Lani.animationLoopStarted=!1,Lani.startAnimationLoop=()=>{Lani.animationLoopStarted||(requestAnimationFrame(Lani.animate),Lani.animationLoopStarted=!0)},Lani.fillCircle=(e,t,i,n)=>{n<=0||(e.beginPath(),e.arc(t,i,n,0,2*Math.PI),e.fill())},Lani.drawLine=(e,t,i,n,a,s=null)=>{s&&(e.lineWidth=s),e.beginPath(),e.moveTo(t,i),e.lineTo(n,a),e.stroke()},Lani.rads=e=>e*Math.PI/180,Lani.xOnCircle=(e,t)=>e*Math.cos(Lani.rads(t)),Lani.yOnCircle=(e,t)=>e*Math.sin(Lani.rads(t)),Lani.pointOnCircle=(e,t)=>({x:Lani.xOnCircle(e,t),y:Lani.yOnCircle(e,t)}),Lani.circumference=e=>2*Math.PI*e,Lani.goldenRatio=1.618,Lani.Animation=class{constructor(e){this.canvas=e,this.canvas&&(this.ctx=this.canvas.getContext("2d"))}canvasSize(){this.canvas.width==this.canvas.offsetWidth&&this.canvas.height==this.canvas.offsetHeight||(this.canvas.width=this.canvas.offsetWidth,this.canvas.height=this.canvas.offsetHeight)}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}animate(e){}},Lani.AnimationEntity=class{constructor(e=1,t=1){this.sizeMultiplier=e,this.speedMultiplier=t,this.reset()}reset(){this.size=1,this.x=0,this.y=0,this.velX=0,this.velY=0,this.rotationDeg=0,this.birth=performance.now()}randomize(){this.size=(Math.random()/2+.5)*this.sizeMultiplier,this.x=Math.random(),this.y=Math.random(),this.velX=this.randomVelocity()*Lani.randomSign(),this.velY=this.randomVelocity()*Lani.randomSign()}randomVelocity(){return(.0025+Math.random()/250)*this.speedMultiplier}},window.addEventListener("load",Lani.animationLoadHandler),window.addEventListener("blur",Lani.animationWindowBlurHandler),window.addEventListener("focus",Lani.animationWindowFocusHandler),Lani.requireModule("lani-animations"),Lani.BubbleAnimation=class extends Lani.Animation{constructor(e,t,i,n){super(e),null===t&&(t=5),null===n&&(n=1),this.sizeMultiplier=i=null===i?1:i,this.speedMultiplier=n,this.bubbles=[];for(let e=0;e<t;e++){let e=new Lani.AnimationEntity(this.sizeMultiplier,this.speedMultiplier);e.randomize(),this.bubbles.push(e)}}animate(n){let a=this.canvas.offsetWidth,s=this.canvas.offsetHeight,r=(this.canvasSize(),this.ctx);this.clear(),r.fillStyle="rgba(255, 255, 255, 0.3)",this.bubbles.forEach(e=>{var t,i;1<=e.x&&0<e.velX&&(e.velX=-e.randomVelocity()),e.x<=0&&e.velX<0&&(e.velX=e.randomVelocity()),1<=e.y&&0<e.velY&&(e.velY=-e.randomVelocity()),e.y<=0&&e.velY<0&&(e.velY=e.randomVelocity()),e.x+=e.velX*(n/250),e.y+=e.velY*(n/250),i=80*e.size,t=a*e.x,e=s*e.y,Lani.fillCircle(r,t,e,i)})}},Lani.BubblesElement=class extends Lani.Element{constructor(){super(),this.animation=null}async setup(){await this.useTemplate(Lani.templatesPath(),"#lani-animation-basic");let e=this.getAttribute("count"),t=(e=e&&""!=e?parseInt(e):null,this.getAttribute("size")),i=(t=t&&""!=t?parseFloat(t):null,this.getAttribute("speed"));i=i&&""!=i?parseFloat(i):null,this.animation=new Lani.BubbleAnimation(this.shadow.getElementById("screen"),e,t,i),Lani.animations.push(this.animation)}connectedCallback(){this.setup()}},Lani.regEl("lani-bubbles",Lani.BubblesElement),Lani.requireModule("lani-animations"),Lani.DotGridAnimation=class extends Lani.Animation{constructor(e,t,i){null===t&&(t=25),null===i&&(i=4),super(e),this.location=0,this.dotsDensity=t,this.dotRadius=i}animate(e){var t=this.canvas.width,i=this.canvas.height;this.canvasSize(),this.location+=e/250;let n=this.ctx;this.clear(),n.fillStyle="rgba(255, 255, 255, 0.3)";var a=Math.floor(t/this.dotsDensity),s=Math.floor(i/this.dotsDensity);for(let t=0;t<a;t++)for(let e=0;e<s;e++){var r=4*Math.sin((this.location-t)/3),r=Math.max(1,r+this.dotRadius);Lani.fillCircle(n,Math.floor(this.dotsDensity/2+t*this.dotsDensity),Math.floor(this.dotsDensity/2+e*this.dotsDensity),r)}}},Lani.DotGridElement=class extends Lani.Element{constructor(){super(),this.animation=null}async setup(){await this.useTemplate(Lani.templatesPath(),"#lani-animation-basic");let e=this.getAttribute("density"),t=(e=e&&""!=e?parseInt(e):null,this.getAttribute("size"));t=t&&""!=t?parseFloat(t):null;var i=new Lani.DotGridAnimation(this.shadow.getElementById("screen"),e,t);Lani.animations.push(i)}connectedCallback(){this.setup()}},Lani.regEl("lani-dots",Lani.DotGridElement),Lani.requireModule("lani-animations"),Lani.TreeBranch=class extends Lani.AnimationEntity{constructor(){super(),this.length=.25,this.thickness=1,this.children=[],this.parent=null,this.branchSpread=25,this.branchLengthRatio=1.5,this.angleRandomness=35,this.lengthRandomness=.6}randomAngleDeviation(){return this.angleRandomness/2-Math.random()*this.angleRandomness}randomLengthDeviation(){return this.lengthRandomness/2-Math.random()*this.lengthRandomness}generateChildren(i=10){if(!(i<=0)){this.thickness=i;let e=new Lani.TreeBranch,t=new Lani.TreeBranch;e.rotationDeg=this.rotationDeg-this.branchSpread+this.randomAngleDeviation(),e.length=this.length/(this.branchLengthRatio+this.randomLengthDeviation()),t.rotationDeg=this.rotationDeg+this.branchSpread+this.randomAngleDeviation(),t.length=this.length/(this.branchLengthRatio+this.randomLengthDeviation()),this.children.push(e),this.children.push(t),i--,this.children.forEach(e=>e.generateChildren(i))}}render(t,e,i,n){var a=Lani.pointOnCircle(n*this.length,this.rotationDeg);let s=e+a.x,r=i+a.y;t.lineWidth=this.thickness,Lani.drawLine(t,e,n-i,s,n-r),this.children.forEach(e=>e.render(t,s,r,n))}},Lani.TreeAnimation=class extends Lani.Animation{constructor(e){super(e),this.root=new Lani.TreeBranch,this.root.generateChildren()}animate(e){var t=this.canvas.offsetWidth,i=this.canvas.offsetHeight;this.canvasSize();let n=this.ctx;this.clear(),n.strokeStyle="rgb(255, 255, 255)",this.root.render(n,t/2,0,i)}},Lani.TreeElement=class extends Lani.Element{constructor(){super(),this.animation=null}async setup(){await this.useTemplate(Lani.templatesPath(),"#lani-animation-basic"),this.animation=new Lani.TreeAnimation(this.shadow.getElementById("screen")),Lani.animations.push(this.animation)}connectedCallback(){this.setup()}},Lani.regEl("lani-tree",Lani.TreeElement),Lani.requireModule("lani-animations"),Lani.installedModules.push("lani-svg"),Lani.svg={},Lani.svg.arc=(e,t,i,n,a)=>{n=Lani.pointOnCircle(i,n),a=Lani.pointOnCircle(i,a);return`M ${e+n.x} ${t+n.y} `+`A ${i} ${i} 0 0 1 `+(e+a.x)+" "+(t+a.y)},Lani.svg.relative=e=>e.toLowerCase(),Lani.svg.absolute=e=>e.toUpperCase(),Lani.installedModules.push("lani-markdown"),Lani.Markdown={},Lani.Markdown.TokenType={EOL:0,EOF:1,Text:2,Header:3,TextStyle:4,Code:5},Lani.Markdown.Token=class{constructor(e=null,t=null){this.type=e,this.text=t,this.DEBUG_TypeText=this.typeText}get typeText(){for(var[e,t]of Object.entries(Lani.Markdown.TokenType))if(t===this.type)return e}},Lani.Markdown.Tokenizer=class{constructor(e=null){this.source=e,this.reader={seek:0,text:""},this.tokens=[]}readChar(){return this.isEOF()?null:this.source[this.reader.seek++]}isEOF(){return null===this.source||this.reader.seek===this.source.length}resetText(){this.reader.text=""}pushTextToken(){this.reader.text&&this.reader.text.length&&this.tokens.push(new Lani.Markdown.Token(Lani.Markdown.TokenType.Text,this.reader.text)),this.resetText()}tokenize(){var e;for(this.resetText();null!==(e=this.readChar());)"\n"===e?(this.pushTextToken(),this.tokens.push(new Lani.Markdown.Token(Lani.Markdown.TokenType.EOL,e))):"*"===e?(this.pushTextToken(),this.tokens.push(new Lani.Markdown.Token(Lani.Markdown.TokenType.TextStyle,e))):"#"===e?(this.pushTextToken(),this.tokens.push(new Lani.Markdown.Token(Lani.Markdown.TokenType.Header,e))):"`"===e?(this.pushTextToken(),this.tokens.push(new Lani.Markdown.Token(Lani.Markdown.TokenType.Code,e))):this.reader.text+=e;this.pushTextToken(),this.tokens.push(new Lani.Markdown.Token(Lani.Markdown.TokenType.EOF))}},Lani.Markdown.SymbolType={Text:0,Header:1,EOL:2},Lani.Markdown.Symbol=class{constructor(e=null,t=null){this.type=e,this.text=t}},Lani.Markdown.HeaderSymbol=class extends Lani.Markdown.Symbol{constructor(e=1){super(Lani.Markdown.SymbolType.Header),this.level=e}},Lani.Markdown.Parser=class{constructor(e){this.tokenizer=e,this.reader={seek:0,peek:0,lookBack:0},this.lines=[],this.currentLine=[]}isEOF(){return this.reader.seek+this.reader.peek===this.tokenizer.tokens.length}reset(){this.lines=[],this.reader.seek=0,this.resetLookBack(),this.resetPeek()}resetLookBack(){this.reader.lookBack=0}resetPeek(){this.reader.peek=0}nextToken(){if(this.resetPeek(),this.resetLookBack(),this.isEOF())return null;var e=this.tokenizer.tokens[this.reader.seek];return this.reader.seek++,e}peekToken(){if(this.isEOF(!0))return null;var e=this.tokenizer.tokens[this.reader.seek+this.reader.peek];return this.reader.peek++,e}unpeek(){--this.reader.peek}goToPeek(){this.reader.seek+=this.reader.peek,this.reader.peek=0}prevToken(){if(this.reader.lookBack++,this.tokenizer.tokens.length+this.reader.lookBack<0)return null}addTextSymbol(e){this.currentLine.length&&this.currentLine[this.currentLine.length-1].type===Lani.Markdown.SymbolType.Text?this.currentLine[this.currentLine.length-1].text+=e:this.currentLine.push(new Lani.Markdown.Symbol(Lani.Markdown.SymbolType.Text,e))}finalizeLine(){this.currentLine.push(new Lani.Markdown.Symbol(Lani.Markdown.SymbolType.EOL)),this.lines.push(this.currentLine),this.currentLine=[]}parse(){this.reset();let e=!(this.currentLine=[]);for(;!e;){var t=this.nextToken();if(t.type===Lani.Markdown.TokenType.Header)if(0===this.currentLine.length){let e=1;for(;this.peekToken().type===Lani.Markdown.TokenType.Header&&e<6;)e++;1<e&&(this.unpeek(),this.goToPeek()),this.currentLine.push(new Lani.Markdown.HeaderSymbol(e))}else this.addTextSymbol("#");else t.type===Lani.Markdown.TokenType.Text?this.addTextSymbol(t.text):t.type===Lani.Markdown.TokenType.EOL?this.finalizeLine():t.type===Lani.Markdown.TokenType.EOF&&(this.finalizeLine(),e=!0)}}},Lani.Markdown.UnclosedLineTag=class{constructor(e=null,t=null){this.symbolMatch=e,this.closeTag=t}},Lani.Markdown.Renderer=class{constructor(e=null){this.parser=e}toHTML(){let t="",i=[],n=0;for(var a of this.parser.lines){let e=0===i.length;for(var s of a){if(s.type===Lani.Markdown.SymbolType.Header)t+=`<h${s.level}>`,i.push(new Lani.Markdown.UnclosedLineTag(null,`</h${s.level}>`));else if(s.type===Lani.Markdown.SymbolType.Text)e?(t+="<p>"+s.text,i.push(new Lani.Markdown.UnclosedLineTag(Lani.Markdown.SymbolType.Text,"</p>"))):t+=s.text;else if(s.type===Lani.Markdown.SymbolType.EOL){let e=a[0].type===Lani.Markdown.SymbolType.Text;var r;for(n<this.parser.lines.length-1?(s=this.parser.lines[n+1],e&&=s[0].type===Lani.Markdown.SymbolType.Text):e=!1;r=i.pop();){if(e&&r.symbolMatch===Lani.Markdown.SymbolType.Text){i.push(r);break}t+=r.closeTag}t+="\n"}e=!1}n++}return t}},Lani.Markdown.from=e=>{let t=new Lani.Markdown.Tokenizer(e),i=(t.tokenize(),new Lani.Markdown.Parser(t));return i.parse(),new Lani.Markdown.Renderer(i)},Lani.RenderMarkdown=e=>Lani.Markdown.from(e).toHTML(),Lani.ElementEvents.DataDownloaded="lani::data-downloaded",Lani.ElementEvents.DataReady="lani::data-ready",Lani.DataSourceElementHandlers={},Lani.DataSourceElementHandlers.download=e=>{e.dataSource=new Lani.DownloadedDataSource(e.getAttribute("source"))},Lani.DataSourceElement=class extends Lani.Element{constructor(){super(),this.dataSource=null,this.dataReady=!1,this.slotElement=null}connectedCallback(){this.setupNonDOM(),this.slotElement=Lani.c("slot"),this.shadow.appendChild(this.slotElement),this.slotElement.addEventListener("slotchange",e=>{this.discoverGroups()});let e=this.getAttribute("type"),t=(null===e&&(console.warn('No data source type present, assuming "download"',this),e="download"),Lani.DataSourceElementHandlers[e]);t?t(this):console.error(`No handler found for data source element (type: ${e})`,this)}discoverGroups(){this.dataSource.groups=Array.from(this.querySelectorAll("lani-data-group")).map(e=>e.groupKey)}dataReady(){this.dataReady=!0,this.emit(Lani.ElementEvents.DataReady)}dataDownloaded(){this.dataReady(),this.emit(Lani.ElementEvents.DataReady)}async get(){return this.dataSource.get()}},Lani.regEl("lani-data-source",Lani.DataSourceElement),Lani.DataGroupElement=class extends Lani.Element{get groupKey(){return this.getAttribute("group")??this.getAttribute("group-key")??this.innerText}},Lani.regEl("lani-data-group",Lani.DataGroupElement),Lani.installedModules.push("lani-dialogs"),Lani.currentDialogLayer=null,Lani.DialogLayer=class extends Lani.Element{constructor(){super(),this.dialogs=[],this.nextLayer=1,this.focusStack=[],this.resizeObserver=new ResizeObserver(()=>{for(var e of this.dialogs)e.doPosition()}),this.resizeObserver.observe(this),this.setup()}async setup(){await this.useTemplate(Lani.templatesPath(),"#lani-dialog-layer"),this.addEventListener(Lani.ElementEvents.Close,e=>{e.target!==this&&this.checkEmpty()})}showDialog(e){this.dialogs.push(e),this.appendChild(e),e.doPosition()}removeDialog(t){this.dialogs=this.dialogs.filter(e=>e!==t),this.checkEmpty()}checkEmpty(){0==this.dialogs.length&&this.close()}show(e){(e=e||document.body).appendChild(this),this.emit(Lani.ElementEvents.Show)}close(){this.parentNode&&this.parentNode.removeChild(this),this.emit(Lani.ElementEvents.Close)}},Lani.Dialog=class extends Lani.Element{#dialogTitle;#isMaximized;#originalDimensions;#closeEnabled;constructor(){super(),this.#dialogTitle=null,this.verticalAlignment=Lani.Position.Middle,this.horizontalAlignment=Lani.Position.Middle,this.movementOffsetLeft=0,this.movementOffsetTop=0,this.allowMovePastBorders=!1,this.resizeObserver=new ResizeObserver(()=>{this.doPosition()}),this.resizeObserver.observe(this),this.returnValue=null,this.#isMaximized=!1,this.#originalDimensions={width:null,height:null},this.#closeEnabled=!0,this.setup()}async setup(){this.linkStyle(Lani.contentRoot+"/dialogs.css"),await this.useTemplate(Lani.templatesPath(),"#lani-dialog"),this.shadow.getElementById("close-button").addEventListener("click",()=>{this.#closeEnabled&&this.close()}),this.shadow.getElementById("maximize-button").addEventListener("click",()=>{this.toggleMaximize()});let t=this.shadow.getElementById("status-bar");t.addEventListener("mousedown",e=>{if(e.target===t&&!this.#isMaximized){let i=e.clientX-this.offsetLeft,n=e.clientY-this.offsetTop,t=e=>{var t=e.clientX-i,e=e.clientY-n;this.moveTo(t,e)},a=e=>{window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",a)};window.addEventListener("mousemove",t),window.addEventListener("mouseup",a)}}),this.#resizeHandle("resize-top-left",e=>{var t=e.clientX-this.offsetLeft,e=e.clientY-this.offsetTop,i=this.offsetWidth,n=this.offsetHeight;this.resize(this.offsetWidth-t,this.offsetHeight-e),this.moveBy(i-this.offsetWidth,n-this.offsetHeight)}),this.#resizeHandle("resize-top",e=>{var e=e.clientY-this.offsetTop,t=this.offsetHeight;this.resize(null,this.offsetHeight-e),this.moveBy(null,t-this.offsetHeight)}),this.#resizeHandle("resize-top-right",e=>{var t=e.clientX-this.offsetLeft,e=e.clientY-this.offsetTop;this.resize(t,this.offsetHeight-e),this.moveBy(null,e)}),this.#resizeHandle("resize-right",e=>{e=e.clientX-this.offsetLeft;this.resize(e,null)}),this.#resizeHandle("resize-bottom-right",e=>{var t=e.clientX-this.offsetLeft,e=e.clientY-this.offsetTop;this.resize(t,e)}),this.#resizeHandle("resize-bottom",e=>{e=e.clientY-this.offsetTop;this.resize(null,e)}),this.#resizeHandle("resize-bottom-left",e=>{var t=e.clientX-this.offsetLeft,e=e.clientY-this.offsetTop;this.resize(this.offsetWidth-t,e),this.moveBy(t,null)}),this.#resizeHandle("resize-left",e=>{var e=e.clientX-this.offsetLeft,t=this.offsetWidth;this.resize(this.offsetWidth-e,null),this.moveBy(t-this.offsetWidth,null)})}#resizeHandle(e,n){let t=this.shadow.getElementById(e);t.addEventListener("mousedown",e=>{if(!this.#isMaximized){let t=e=>{e.preventDefault(),e.stopPropagation(),n(e)},i=e=>{window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",i)};window.addEventListener("mousemove",t),window.addEventListener("mouseup",i)}})}set dialogTitle(e){this.#dialogTitle=e,this.shadow.getElementById("title").innerHTML=this.#dialogTitle}htmlContent(e){this.shadow.getElementById("content").innerHTML=e}doPosition(){this.#isMaximized?(this.style.top="0px",this.style.left="0px"):Lani.positionElement(this,this.horizontalAlignment,this.verticalAlignment,this.movementOffsetLeft,this.movementOffsetTop)}addButton(e,t){let i=Lani.create("button",{slot:"buttons",parent:this.shadow.getElementById("buttons-slot"),innerHTML:e});return t&&i.addEventListener("click",t),i}addCloseButton(e="Close",t=!1){return t?this.addActionButton(e,()=>this.close()):this.addButton(e,()=>this.close())}addActionButton(e,t){let i=this.addButton(e,t);return i.className+=" l-button-action",i}moveTo(e,t){this.staticPosition(),this.allowMovePastBorders||(null!==t&&t<0&&(t=0),null!==(e=null!==e&&e<0?0:e)&&e+this.offsetWidth>=this.parentNode.offsetWidth&&(e=Math.max(0,this.parentNode.offsetWidth-this.offsetWidth)),null!==t&&t+this.offsetHeight>=this.parentNode.offsetHeight&&(t=Math.max(0,this.parentNode.offsetHeight-this.offsetHeight))),null!==e&&(this.movementOffsetLeft=e),null!==t&&(this.movementOffsetTop=t),this.doPosition()}moveBy(e,t){this.staticPosition(),null!==e&&(this.movementOffsetLeft+=e),null!==t&&(this.movementOffsetTop+=t),this.doPosition()}staticPosition(){this.horizontalAlignment!==Lani.Position.Absolute&&(this.horizontalAlignment=Lani.Position.Absolute,this.movementOffsetLeft=this.offsetLeft),this.verticalAlignment!==Lani.Position.Absolute&&(this.verticalAlignment=Lani.Position.Absolute,this.movementOffsetTop=this.offsetTop)}resize(e,t){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),null!==e&&(this.style.width=e+"px"),null!==t&&(this.style.height=t+"px")}makeSizeFixed(){this.style.width=this.offsetWidth+"px",this.style.height=this.offsetHeight+"px"}toggleMaximize(){this.#isMaximized?this.restore():this.maximize()}hideResizeHandles(){this.shadow.querySelectorAll(".l-dialog-resize-handle").forEach(e=>{e.style.display="none"})}showResizeHandles(){this.shadow.querySelectorAll(".l-dialog-resize-handle").forEach(e=>{e.style.display="block"})}disableMaximize(){this.shadow.getElementById("maximize-button").style.display="none"}enableMaximize(){this.shadow.getElementById("maximize-button").style.display="block"}maximize(){this.#isMaximized||(this.#isMaximized=!0,this.style.borderRadius="0px",this.#isMaximized=!0,this.#originalDimensions.width=this.style.width,this.#originalDimensions.height=this.style.height,this.style.width="100%",this.style.height="100%",this.shadow.querySelector("#maximize-button > lani-icon").setIcon("window-restore"),this.hideResizeHandles(),this.doPosition())}restore(){this.#isMaximized&&(this.#isMaximized=!1,this.style.borderRadius="var(--lani-rounded)",this.style.width=this.#originalDimensions.width,this.style.height=this.#originalDimensions.height,this.shadow.querySelector("#maximize-button > lani-icon").setIcon("expand"),this.showResizeHandles(),this.doPosition())}enableClose(){this.#closeEnabled=!0,this.shadow.getElementById("close-button").disabled=!1}disableClose(){this.#closeEnabled=!1,this.shadow.getElementById("close-button").disabled=!0}close(){this.emit(Lani.ElementEvents.Close),this.parentNode&&(this.parentNode.remove(this),"LANI-DIALOG-LAYER"==this.parentNode.tagName&&this.parentNode.removeDialog(this))}},Lani.showDialog=async e=>{null===Lani.currentDialogLayer&&(Lani.currentDialogLayer=await Lani.waitForElement("lani-dialog-layer"),document.body.appendChild(Lani.currentDialogLayer),Lani.currentDialogLayer.addEventListener(Lani.ElementEvents.Close,e=>{Lani.currentDialogLayer=null})),Lani.currentDialogLayer.showDialog(e)},Lani.alert=async(e,t="Webpage Dialog")=>{let i=await Lani.waitForElement("lani-dialog");i.content=e,i.dialogTitle=t,i.style.minWidth="250px",i.style.minHeight="150px",i.addCloseButton("Ok"),i.htmlContent(`<div><p class="l-no-spacing">${e}</p></div>`),await Lani.showDialog(i)},Lani.showFormInDialog=async(e,t=0)=>{},Lani.regEl("lani-dialog-layer",Lani.DialogLayer),Lani.regEl("lani-dialog",Lani.Dialog),Lani.installedModules.push("lani-icons"),Lani.IconResolver=class{constructor(){}resolve(e,t,i=0){}},Lani.FontAwesomeIconResolver=class extends Lani.IconResolver{constructor(){super(),this.defaultStyle="fa-solid",this.injectDefaultStyle=!0}resolve(e,t,i={}){e.className=e.className.split(" ").filter(e=>!e.startsWith("fa-")).join(" "),0!=t.length&&(this.defaultStyle,"string"==typeof i.style&&i.style,this.injectDefaultStyle&&(e.className+=this.defaultStyle+" "),Array.isArray(t)?e.className+=t.map(e=>"fa-"+e).join(" "):e.className+="fa-"+t)}},Lani.iconResolver=new Lani.FontAwesomeIconResolver,Lani.IconElement=class extends Lani.Element{constructor(){super(!1)}setIcon(e){-1!==e.indexOf(",")&&(e=e.split(",")),Lani.iconResolver.resolve(this,e)}static get observedAttributes(){return["icon"]}attributeChangedCallback(e,t,i){"icon"==e&&this.setIcon(i)}},Lani.regEl("lani-icon",Lani.IconElement),Lani.PaginatorElement=class extends Lani.Element{constructor(){super(),this.setup()}async setup(){await this.useTemplate(Lani.templatesPath(),"#lani-paginator"),this.ready()}nextPage(){this.emit("lani::next-page")}lastPage(){this.emit("lani::last-page")}previousPage(){this.emit("lani::previous-page")}firstPage(){this.emit("lani::first-page")}},Lani.regEl("lani-paginator",Lani.PaginatorElement),Lani.requireModule("lani-svg"),Lani.ArcElement=class extends Lani.DataElement{constructor(){super(),this.setup(),this.svg=null,this.background=null,this.foreground=null}async setup(){await this.useDefaultTemplate("lani-arc"),this.svg=this.shadow.querySelector("svg"),this.background=this.shadow.getElementById("background"),this.foreground=this.shadow.getElementById("foreground"),this.updateValue(50)}updateValue(e){var t=Lani.circumference(parseFloat(this.background.getAttribute("r")));this.background.setAttribute("stroke-dasharray",t),this.foreground.setAttribute("stroke-dasharray",t),this.background.style.strokeDashoffset=t/2*(1+e/100),this.background.style.transform=`rotate(${e/100*180-180}deg)`,this.foreground.style.strokeDashoffset=t/2*(1+(100-e)/100)}},Lani.regEl("lani-arc",Lani.ArcElement),Lani.OnOffElement=class extends Lani.Element{constructor(){super(),this.state="on",this.onText="ON",this.offText="OFF",this.setup()}async setup(){await this.useDefaultTemplate("lani-on-off"),this.shadow.getElementById("circle").addEventListener("click",e=>{this.toggle()}),this.state=this.getAttribute("state")??this.state,this.onText=this.getAttribute("on-text")??this.onText,this.offText=this.getAttribute("off-text")??this.offText,this.displayState()}toggle(){this.state="on"==this.state?"off":"on",this.displayState(),this.emit(Lani.ElementEvents.StateChange,{state:this.state,element:this})}displayState(){"on"==this.state?(this.shadow.getElementById("ring-outer").style.borderColor="var(--lani-on-off-state-on)",this.shadow.querySelector("div#content p").innerHTML=this.onText):(this.shadow.getElementById("ring-outer").style.borderColor="var(--lani-on-off-state-off)",this.shadow.querySelector("div#content p").innerHTML=this.offText)}},Lani.regEl("lani-on-off",Lani.OnOffElement),Lani.installedModules.push("lani-calendar"),Lani.CalendarLib={},Lani.CalendarColor4=class{constructor(e=null){this.all=e}set all(e){this.top=e,this.bottom=e,this.left=e,this.right=e}applyToBorder(e){e.style.borderTopColor=Lani.CalendarColor4.toCSS(this.top),e.style.borderBottomColor=Lani.CalendarColor4.toCSS(this.bottom),e.style.borderLeftColor=Lani.CalendarColor4.toCSS(this.left),e.style.borderRightColor=Lani.CalendarColor4.toCSS(this.right)}static toCSS(e){return null===e?"transparent":e}},Lani.CALENDAR_FMT_VERSION=1,Lani.CalendarFormatting=class{constructor(){this.version=Lani.CALENDAR_FMT_VERSION,this.backgroundColor="white",this.width="11in",this.height="8.5in",this.outerBorderSize=new Lani.Dimension(0),this.outerBorderMargin=new Lani.Dimension(0),this.outerBorderPadding=new Lani.Dimension(0),this.outerBorderColor=new Lani.CalendarColor4("black"),this.showTitle=!0,this.titleBackgroundColor="#f54242",this.titleForegroundColor="white",this.titleSize=1,this.titleFont=new Lani.Font,this.titleFont.size="4rem",this.titleBorderSize=new Lani.Dimension,this.titleBorderColor=new Lani.CalendarColor4,this.titleMargin=new Lani.Dimension(2),this.gridBackgroundColor=null,this.gridForegroundColor="black",this.gridMargin=new Lani.Dimension(10),this.gridSize=5,this.gridOuterBorderSize=new Lani.Dimension(1),this.gridInnerBorderSize=1,this.gridOuterBorderColor=new Lani.CalendarColor4("lightgray"),this.gridInnerBorderColor="lightgray",this.showDaysRow=!0,this.dayGridBackgroundColor=null,this.dayGridForegroundColor="black",this.dayGridFont=new Lani.Font,this.dayGridFont.size="1rem",this.dayGridFont.isBold=!0,this.dayGridInnerBorderColor=null,this.dayGridBottomBorderColor="lightgray",this.dayGridBottomBorderSize=1,this.gridCellPadding=new Lani.Dimension(2),this.showDayNumbers=!0,this.showDayNumbersForOtherMonths=!0}},Lani.CalendarCellFormatting=class{constructor(){this.version=Lani.CALENDAR_FMT_VERSION,this.dayNumberFont=new Lani.Font,this.dayNumberFont.size="1rem",this.dayNumberMargin=new Lani.Dimension(3),this.dayNumberPadding=new Lani.Dimension(3),this.dayNumberForegroundColor="black",this.dayNumberBackgroundColor=null,this.dayNumberRounding=new Lani.Corners(3)}},Lani.CalendarEventFormatting=class{constructor(){this.version=Lani.CALENDAR_FMT_VERSION}},Lani.CalendarEvent=class{constructor(){this.formatting=new Lani.CalendarEventFormatting,this.content="(new event)"}},Lani.CalendarDay=class{constructor(){this.events=[],this.formatting=null}},Lani.Calendar=class{constructor(){let e=new Date;this.setDate(e.getFullYear(),e.getMonth()+1),this.title=null,this.resources={subTitle:null},this.formatting=new Lani.CalendarFormatting,this.defaultCellFormatting=new Lani.CalendarCellFormatting,this.defaultWeekendCellFormatting=null,this.defaultEventFormatting=new Lani.CalendarEventFormatting}createDaysArray(){this.days=new Array(7*Lani.calendarRowsForMonth(this.year,this.month));for(let e=0;e<this.days.length;e++)this.days[e]=new Lani.CalendarDay}getDayOfMonth(e){return this.days[e+firstDayOfMonth(this.year,this.month)]}setDate(e=null,t=null){null!==e&&(this.year=e),null!==t&&(this.month=t),this.createDaysArray()}},Lani.CalendarDays=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Lani.CalendarDaysShort=["sun","mon","tues","wed","thurs","fri","sat"],Lani.CalendarDaysAbbr=["su","m","t","w","th","f","sa"],Lani.CalendarMonths=["january","february","march","april","may","june","july","august","september","october","november","december"],Lani.CalendarMonthsShort=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],Lani.daysInMonth=(e,t)=>new Date(e,t,0).getDate(),Lani.firstDayOfMonth=(e,t)=>new Date(e,t-1).getDay(),Lani.calendarRowsForMonth=(t,i,n=6)=>{i--;var a=Lani.daysInMonth(t,i);let s=0,r=0;for(;r<a;){r++;let e=new Date(t,i,r);e.getDay()!==n&&r!=a||s++,e.getDay()===n&&7<a-r&&(r+=6)}return s},Lani.CalendarElement=class extends Lani.Element{constructor(){super(),this.calendar=new Lani.Calendar}get formatting(){return this.calendar.formatting}async connectedCallback(){await this.useDefaultTemplate("lani-calendar");var e=this.getAttribute("calendar-title");e&&(this.title=e),this.applyFormatting()}applyFormatting(){this.style.background=this.formatting.backgroundColor,this.style.width=this.formatting.width,this.style.height=this.formatting.height;var e=this.shadow.getElementById("container");this.formatting.outerBorderMargin.applyToMargin(e),this.formatting.outerBorderPadding.applyToPadding(e),this.formatting.outerBorderSize.applyToBorder(e);let t=this.shadow.getElementById("title-container");if(!0===this.formatting.showTitle){t.style.display="flex",t.style.flex=this.formatting.titleSize,t.style.background=this.formatting.titleBackgroundColor??"none",this.formatting.titleBorderColor.applyToBorder(t),this.formatting.titleBorderSize.applyToBorder(t);let e=this.shadow.getElementById("title");e.style.color=this.formatting.titleForegroundColor??"transparent",this.formatting.titleFont.apply(e)}else t.style.display="none";let i=this.shadow.getElementById("grid-container");i.style.flex=this.formatting.gridSize,this.formatting.gridMargin.applyToMargin(i),this.formatting.gridOuterBorderSize.applyToBorder(i),this.formatting.gridOuterBorderColor.applyToBorder(i);this.populateGrid()}populateGrid(){let e=this.shadow.getElementById("grid"),t=(e.innerHTML="",0);if(this.formatting.showDaysRow){var i,n=Lani.c("thead",null,e),a=Lani.c("tr",null,n);for(i of Lani.CalendarDays){let e=Lani.c("th",null,a,{innerHTML:Lani.initCap(i)});e.style.background=this.formatting.dayGridBackgroundColor??"none",e.style.color=this.formatting.dayGridForegroundColor,this.formatting.dayGridFont.apply(e),null!==this.formatting.dayGridBottomBorderSize&&(e.style.borderBottomWidth=Lani.genericDimension(this.formatting.dayGridBottomBorderSize)),e.style.borderBottomColor=this.formatting.dayGridBottomBorderColor??"transparent",0!==t&&(e.style.borderLeftColor=this.formatting.dayGridInnerBorderColor??this.formatting.gridInnerBorderColor??"transparent",e.style.borderLeftWidth=Lani.genericDimension(this.formatting.gridInnerBorderSize)),t<6&&(e.style.borderRightColor=this.formatting.dayGridInnerBorderColor??this.formatting.gridInnerBorderColor??"transparent",e.style.borderRightWidth=Lani.genericDimension(this.formatting.gridInnerBorderSize)),t++}}var r=Lani.c("tbody",null,e),o=Lani.calendarRowsForMonth(this.calendar.year,this.calendar.month),l=Lani.firstDayOfMonth(this.calendar.year,this.calendar.month),h=Lani.daysInMonth(this.calendar.year,this.calendar.month-1),d=Lani.daysInMonth(this.calendar.year,this.calendar.month);for(let s=0;s<o;s++){var u=Lani.c("tr",null,r);for(let a=0;a<7;a++){var c=7*s+a-(l-1);let e=new Date(this.calendar.year,this.calendar.month-1,c);var m=0==e.getDay()||6==e.getDay();let t,i=(t=m?this.calendar.days[a].formatting??this.calendar.defaultWeekendCellFormatting??this.calendar.defaultCellFormatting:this.calendar.days[a].formatting??this.calendar.defaultCellFormatting,Lani.c("td",null,u)),n=null;this.formatting.gridCellPadding.applyToPadding(i),0===s?(0<c?this.formatting.showDayNumbers&&(n=Lani.c("p","day-label",i,{innerHTML:c})):this.formatting.showDayNumbers&&this.formatting.showDayNumbersForOtherMonths&&(n=Lani.c("p","day-label",i,{innerHTML:h+c}),i.className+=" not-this-month"),0!==a&&(i.style.borderLeftWidth=Lani.genericDimension(this.formatting.gridInnerBorderSize),i.style.borderLeftColor=this.formatting.gridInnerBorderColor),i.style.borderBottomWidth=Lani.genericDimension(this.formatting.gridInnerBorderSize),i.style.borderBottomColor=this.formatting.gridInnerBorderColor):s===o-1?(c<=d?this.formatting.showDayNumbers&&(n=Lani.c("p","day-label",i,{innerHTML:c})):this.formatting.showDayNumbers&&this.formatting.showDayNumbersForOtherMonths&&(n=Lani.c("p","day-label",i,{innerHTML:c-d}),i.className+=" not-this-month"),0!==a&&(i.style.borderLeftWidth=Lani.genericDimension(this.formatting.gridInnerBorderSize),i.style.borderLeftColor=this.formatting.gridInnerBorderColor)):(this.formatting.showDayNumbers&&(n=Lani.c("p","day-label",i,{innerHTML:c})),0!==a&&(i.style.borderLeftWidth=Lani.genericDimension(this.formatting.gridInnerBorderSize),i.style.borderLeftColor=this.formatting.gridInnerBorderColor),i.style.borderBottomWidth=Lani.genericDimension(this.formatting.gridInnerBorderSize),i.style.borderBottomColor=this.formatting.gridInnerBorderColor),a<6&&(i.style.borderRightWidth=Lani.genericDimension(this.formatting.gridInnerBorderSize),i.style.borderRightColor=this.formatting.gridInnerBorderColor),null!==n&&(t.dayNumberFont.apply(n),t.dayNumberMargin.applyToMargin(n),t.dayNumberPadding.applyToPadding(n),t.dayNumberRounding.applyToBorderRadius(n),n.style.backgroundColor=t.dayNumberBackgroundColor??"transparent",n.style.color=t.dayNumberForegroundColor)}}return e}set title(e){this.calendar.title=e,this.shadow.getElementById("title").innerHTML=e}get title(){return this.calendar.title}},Lani.regEl("lani-calendar",Lani.CalendarElement),Lani.installedModules.push("lani-tables"),Lani.TableColumnFormatting=class{constructor(){this.width=null,this.cellCasing=null,this.headerCasing=null,this.trimData=!1,this.nullText=null,this.headerAlign=null,this.style=null,this.headerStyle=null}},Lani.TableColumnBase=class{constructor(e){this.formatting=new Lani.TableColumnFormatting,this.name=e}renderHeader(e){}render(e,t){}},Lani.TableFormatter=class{format(e,t){}},Lani.Condition=class{isMet(){return!0}},Lani.ConditionalTableFormatter=class extends Lani.TableFormatter{constructor(){super(),this.condition=null}checkCondition(e){return null===this.condition||(this.condition instanceof Lani.Condition?this.condition.isMet(e):this.condition(e))}},Lani.TableColumn=class extends Lani.TableColumnBase{constructor(e,t,i=null){super(e),this.sourceName=t,this.formatters=[],this.table=i}getFormattingProperty(e){return null!==this.table?this.formatting[e]??this.table.columnFormatting[e]:this.formatting[e]}renderHeader(e){var t=this.getFormattingProperty("headerStyle"),t=(null!==t&&(e.style.cssText=t),this.getFormattingProperty("headerAlign"));null!==t&&(e.style.textAlign=t),e.innerHTML=this.name}renderColGroup(){let e=Lani.c("col");return null!==this.formatting.style&&(e.style.cssText=this.formatting.style),null!==this.formatting.width&&(e.style.width=this.formatting.width),e}render(e,t){e.isAGroup?t.innerHTML=e.groupValue:t.innerHTML=e[this.sourceName],t.style.cssText=this.formatting.style;for(var i of this.formatters)(!(i instanceof Lani.ConditionalTableFormatter)||i.checkCondition(e))&&i.format(e,t)}},Lani.TableMarkupColumn=class extends Lani.TableColumn{constructor(e,t,i=null){super(e,t,i),this.template=null}connectedCallback(){this.shadow.innerHTML="<slot></slot>",this.addEventListener("slotchange",e=>{this.template=this.querySelector("template")})}renderTemplate(e){this.template&&Lani.useGenericTemplate(this.template,e,!1)}render(e,t){this.renderTemplate(t)}},Lani.TableButtonColumn=class extends Lani.TableColumn{constructor(){this.template=null,this.buttonText=null}connectedCallback(){this.shadow.innerHTML="<slot></slot>",this.addEventListener("slotchange",e=>{this.template=this.querySelector("template")})}render(e,t){let i=null;null!==this.template?Lani.useGenericTemplate(this.template,t,!1):(i=Lani.c("button",null,this)).innerHTML=this.buttonText??this.getAttribute("text")??"Click",null===i&&(i=this.querySelector("button"))}},Lani.tableColumnElementHandlers={},Lani.tableColumnElementHandlers["table-column"]=e=>new Lani.TableColumn,Lani.tableColumnElementHandlers.markup=e=>{let t=new Lani.TableMarkupColumn;return t.template=e.querySelector("template"),t},Lani.TableColumnElement=class extends Lani.Element{get column(){let e=Lani.tableColumnElementHandlers[this.getAttribute("type")??"table-column"],t=e(this);return t.name=this.getAttribute("name")??(""===this.innerText?null:this.innerText)??(""===this.innerHTML?null:this.innerHTML),t.sourceName=this.getAttribute("source-name")??t.name,Lani.TableColumnElement.parseFormatting(this,t.formatting),t}static parseFormatting(e,t){t.headerAlign=e.getAttribute("header-align"),t.width="LANI-TABLE"==e.tagName?e.getAttribute("col-width"):e.getAttribute("width"),t.style="LANI-TABLE"==e.tagName?e.getAttribute("col-style"):e.getAttribute("style"),t.headerStyle=e.getAttribute("header-style")}},Lani.regEl("lani-table-column",Lani.TableColumnElement),Lani.TableRenderer=class{constructor(e){this.table=e}render(t){if(0!==this.table.columns.length){let e=Lani.c("table","l-table");this.table.renderHeaders&&(i=this.#renderHeaders(),e.appendChild(i));var i=this.#renderColGroup(),i=(e.appendChild(i),this.#renderBody(t));e.appendChild(i),this.table.setBody(e)}}#renderHeaders(){var e,t=Lani.c("thead"),i=Lani.c("tr",null,t);for(e of this.table.columns){var n=Lani.c("th",null,i);e.renderHeader(n)}return t}#renderColGroup(){let e=Lani.c("colgroup");for(var t of this.table.columns)e.appendChild(t.renderColGroup());return e}#renderBody(e){if(e.isGrouped)return this.#renderGroupedBody(e);let t=Lani.c("tbody");for(var i of e.rows){let e=Lani.c("tr");for(var n of this.table.columns){var a=Lani.c("td");n.render(i.data,a),e.appendChild(a)}t.appendChild(e)}return t}#renderGroupedBody(e){var t=Lani.c("tbody");try{this.table.validateColumnOrder();for(var i of e.rows)this.#renderGroupedPartial(t,0,i)}catch(e){console.error(e)}return t}#renderGroupedPartial(n,a,s,r=null){if(s.isAGroup){var o,l=r??Lani.c("tr",null,n);let e=Lani.c("td",null,l),t=(e.rowSpan=s.count,this.table.columns[a]),i=(t.render(s,e),!0);for(o of s.rows)this.#renderGroupedPartial(n,a+1,o,i?l:null),i=!1}else if(s.isGrouped)for(var e of s.rows)this.#renderGroupedPartial(n,a,e,r);else{var i=r??Lani.c("tr",null,n);for(let t=a;t<this.table.columns.length;t++){let e=this.table.columns[t];var h=Lani.c("td",null,i);e.render(s.data,h)}}}},Lani.TableTemplates={},Lani.TableTemplates.Loading=`<style>

</style>
<div id="loading-container">
    <h2 id="loading-text">Loading your table...</h2>
    <p id="loading-subtext">Hang tight</p>
    <lani-icon id="loading-icon" icon="table"></lani-icon>
</div>
`,Lani.TableTemplates.NoDataFound="<p>No Data Found</p>",Lani.ElementEvents.TableColumnAdded="lani::table-column-added",Lani.TableElement=class extends Lani.DataElement{#title;constructor(){super(),this.renderHeaders=!0,this.renderer=new Lani.TableRenderer(this),this.dataSource=null,this.autoParseColumns=!0,this.columns=[],this.columnFormatting=new Lani.TableColumnFormatting,this.ignoreColumns=[],this.columnNamePrettifier=new Lani.DataNamePrettifier,this.loadingTemplate=Lani.TableTemplates.Loading,this.noDataFoundTemplate=Lani.TableTemplates.NoDataFound,this.setup()}async setup(){await this.useTemplate(Lani.templatesPath(),"#lani-table",!1),this.linkStyle(Lani.contentRoot+"/tables.css"),Lani.TableColumnElement.parseFormatting(this,this.columnFormatting),this.doDiscovery(),this.renderTable(),this.getBoolAttribute("show-header",!0)||this.hideHeader(),this.getBoolAttribute("show-search",!0)||this.hideSearch(),this.ready()}showHeader(){this.shadow.getElementById("header").style.display="flex"}hideHeader(){this.shadow.getElementById("header").style.display="none"}showSearch(){this.shadow.getElementById("search-container").style.display="flex"}hideSearch(){this.shadow.getElementById("search-container").style.display="none"}get title(){return this.#title}set title(e){this.#title=e,Lani.useGenericTemplate(this.#title,this.shadow.getElementById("title"),!1)}async renderTable(){var e;null!==this.renderer&&null!==this.dataSource&&(e=await this.dataSource.get(),this.autoParseColumns&&0===this.columns.length&&this.parseColumns(e),this.renderer.render(e))}setBody(e){var t=this.shadow.getElementById("body");Lani.useGenericTemplate(e,t,!1)}showLoading(){this.setBody(this.loadingTemplate)}showNoDataFound(){}doDiscovery(){this.discoverTitle(),this.discoverColumns(),this.discoverDataSource()}discoverColumns(){let e=Array.from(this.querySelectorAll("lani-table-column"));if(0!==e.length)for(var t of e.map(e=>e.column))this.addColumn(t)}discoverDataSource(){var e=this.querySelector("lani-data-source");e&&(this.dataSource=e.dataSource)}discoverTitle(){let e=null;var t=this.querySelector("template[slot='title']");return t&&(e=t),this.title=e}addColumn(e){this.columns.push(e),(e.table=this).emit(Lani.ElementEvents.TableColumnAdded,{column:e})}parseColumns(e){this.columns=[];for(var i of e.rows)for(let t of Object.keys(i.data))this.ignoreColumns.includes(t)||this.columns.some(e=>e.sourceName===t)||this.addColumn(new Lani.TableColumn(this.columnNamePrettifier.prettify(t),t));return this.columns}validateColumnOrder(){if(this.dataSource.groups.length>this.columns.length)throw"More groups than columns";for(let e=0;e<this.dataSource.groups.length;e++)if(this.dataSource.groups[e]!=this.columns[e].sourceName)throw`Grouped column in wrong order: ${this.columns[e].name} (${this.columns[e].sourceName})`}},Lani.regEl("lani-table",Lani.TableElement),Lani.installedModules.push("lani-testing"),Lani.TestError=class extends Error{constructor(e){super(e)}},Lani.assertEqual=(e,t)=>{if(e!=t)throw new Lani.TestError(e+" should be equal to "+t)},Lani.assertStrictlyEqual=(e,t)=>{if(e!==t)throw new Lani.TestError(e+" should be strictly equal to "+t)},Lani.assertInequal=(e,t)=>{if(e==t)throw new Lani.TestError(e+" should not be equal to "+t)},Lani.assertStrictlyInequal=(e,t)=>{if(e===t)throw new Lani.TestError(e+" should not be strictly equal to "+t)},Lani.assertGreaterThan=(e,t)=>{if(!(t<e))throw new Lani.TestError(e+" should be greater than "+t)},Lani.assertLessThan=(e,t)=>{if(!(e<t))throw new Lani.TestError(e+" should be less than "+t)},Lani.assertGreaterThanEq=(e,t)=>{if(!(t<=e))throw new Lani.TestError(e+" should be greater than or equal to "+t)},Lani.assertLessThanEq=(e,t)=>{if(!(e<=t))throw new Lani.TestError(e+" should be less than or equal to "+t)},Lani.PerformanceTest=class{constructor(){this.iterations=1e6,this.start=null,this.end=null}test(){}get time(){return this.end-this.start}};