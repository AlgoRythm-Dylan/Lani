const Lani=window.Lani||{};Lani.version="0.1.0",Lani.installedModules=[],Lani.contentRoot="/lani",Lani.shadowLinks=["/fontawesome/fontawesome.min.css","/fontawesome/solid.min.css"],Lani.templatesPath=()=>Lani.contentRoot+"/templates.html",Lani.requireModule=t=>{if(!Lani.installedModules.includes(t))throw"[Lani] A dependency was not met: "+t},Lani.removeClass=(t,e)=>{t.className=t.className.split(" ").filter(t=>t!=e).join(" ")},Lani.create=(t,e={})=>{let i=document.createElement(t);if(e.className&&(i.className=e.className),e.id&&(i.id=e.id),e.src&&(i.src=e.src),e.innerHTML&&(i.innerHTML=e.innerHTML),e.attrs)for(var[n,s]of Object.entries(e.attrs))i.setAttribute(n,s);return e.parent&&e.parent.appendChild(i),e.slot&&i.setAttribute("slot",e.slot),i},Lani.c=(t,e,i,n)=>((n=n||{}).className=e,n.parent=i,Lani.create(t,n)),Lani.templateRepository={},Lani.loadTemplate=async(t,e)=>{let i=Lani.templateRepository[t];return i||(i=await(await fetch(t)).text(),i=(new DOMParser).parseFromString(i,"text/html"),Lani.templateRepository[t]=i),i.querySelector(e)},Lani.ElementEvents={Ready:"lani::ready",Close:"lani::close",Show:"lani::show",StateChange:"lani::state-change"},Lani.Element=class extends HTMLElement{constructor(t=!0,e={}){super(),this.usesShadow=t,void 0===e.mode&&(e.mode="closed"),this.shadow=t?this.attachShadow(e):this,this.importLaniLibs()}linkStyles(t){t.forEach(t=>{Lani.create("link",{parent:this.shadow,attrs:{href:t,rel:"stylesheet",type:"text/css"}})})}linkStyle(t){this.linkStyles([t])}importLaniLibs(){this.usesShadow&&(this.linkStyles([Lani.contentRoot+"/lani.css"]),this.linkStyles(Lani.shadowLinks))}useDOMTemplate(t,e=!0){let i=document.getElementById(t);this.shadow.appendChild(i.content.cloneNode(!0)),e&&this.ready()}async useTemplate(t,e,i=!0){let n=await Lani.loadTemplate(t,e);this.shadow.appendChild(n.content.cloneNode(!0)),i&&this.ready()}async useDefaultTemplate(t,e=!0){await this.useTemplate(Lani.templatesPath(),"#"+t,e)}emit(t,e={}){this.dispatchEvent(new CustomEvent(t,{detail:e}))}ready(t={}){this.emit(Lani.ElementEvents.Ready,t)}setupNonDOM(){this.setAttribute("lani-declarative","true")}getIntAttribute(t){return this.getAttribute(t)?parseInt(t):null}getFloatAttribute(t){return this.getAttribute(t)?parseFloat(t):null}getBoolAttribute(t,e=!1){let i=this.getAttribute(t);return null===i?e:"true"===i.toLowerCase()}},Lani.waitForElement=i=>new Promise(t=>{let e=document.createElement(i);e.addEventListener(Lani.ElementEvents.Ready,()=>t(e))}),Lani.regEl=(t,e,i)=>{customElements.define(t,e,i)},Lani.Direction={Left:"left",Right:"right"},Lani.Position={Start:"start",Middle:"middle",End:"end",Absolute:"abs"},Lani.positionElement=(t,e,i,n=0,s=0)=>{e&&(e==Lani.Position.Start?t.style.left="0px":e==Lani.Position.Middle?t.style.left=n+(t.parentNode.offsetWidth/2-t.offsetWidth/2)+"px":e==Lani.Position.End?t.style.left=n+(t.parentNode.offsetWidth-t.offsetWidth)+"px":e==Lani.Position.Absolute&&(t.style.left=n+"px")),i&&(i==Lani.Position.Start?t.style.top="0px":i==Lani.Position.Middle?t.style.top=s+(t.parentNode.offsetHeight/2-t.offsetHeight/2)+"px":i==Lani.Position.End?t.style.top=s+(t.parentNode.offsetHeight-t.offsetHeight)+"px":i==Lani.Position.Absolute&&(t.style.top=s+"px"))},Lani.downloadBlob=(t,e)=>{let i=Lani.c("a");i.href=URL.createObjectURL(t),i.download=e,i.click()},Lani.getLaniElements=t=>{let e=[];for(var i of t.children)i.tagName.startsWith("LANI-")&&e.push(i);return e},Lani.useGenericTemplate=(t,e,i=!0)=>{null!==t&&("string"==typeof t?i?e.innerHTML+=t:e.innerHTML=t:(i||(e.innerHTML=""),void 0!==t.content?e.appendChild(t.content.cloneNode(!0)):e.appendChild(t)))},Lani.installedModules.push("lani-data"),Lani.DataSetExporters={},Lani.DataSetExporter=class{constructor(t,e="download"){this.dataSet=t,this.fileName=e}async export(){}finish(t){Lani.downloadBlob(t,this.fileName)}},Lani.CSVDataSetExporter=class extends Lani.DataSetExporter{constructor(t,e="download.csv"){super(t,e)}async export(){}},Lani.DataSetExporters["text/csv"]=Lani.CSVDataSetExporter,Lani.DataRow=class{constructor(t){this.data=t}},Lani.groupDataSetRecursive=(t,e)=>{if(0===e.length)return t;let i=e.slice();var n,s=i.shift();let a={};for(n of t.rows){var o=n.data[s];void 0===a[o]&&(a[o]=[]),a[o].push(n.data)}if(t.groupKey=s,t.rows=Object.keys(a).map(t=>{let e=Lani.DataSet.from(a[t]);return e.groupValue=t,e}),0!==i.length)for(var r of t.rows)Lani.groupDataSetRecursive(r,i);return t},Lani.DataSet=class{constructor(){this.rows=[],this.groupKey=null,this.groupValue=null}static from(t){let e=new Lani.DataSet;for(var i of t)e.rows.push(new Lani.DataRow(i));return e}slice(t,e){let i=new Lani.DataSet;return i.isGrouped=this.isGrouped,i.rows=this.rows.slice(t,e),i}toArray(){}filter(t){for(var e of t)for(let t=0;t<this.rows.length;t++)e.meetsCondition(this.rows[t].data)||this.removeAt(t--)}group(t){Lani.groupDataSetRecursive(this,t)}sort(t){}at(t){return this.rows[t]}removeAt(t){this.rows.splice(t,1)}get isGrouped(){return null!==this.groupKey}get isAGroup(){return null!==this.groupValue}get length(){return this.rows.length}get count(){return this.isGrouped?this.rows.reduce((t,e)=>t+e.count,0):this.rows.length}async export(t,e){let i=Lani.DataSetExporters[e];if(!n)throw"No export generator found for file type "+e;let n=new i(this,t);await n.export()}},Lani.Filter=class{constructor(){this.column=null,this.value=null}meetsCondition(t){return t[this.column]===this.value}},Lani.SortDirection={Asc:"Ascending",Desc:"Descending"},Lani.Sort=class{constructor(t,e=null){this.column=t,this.direction=e??Lani.SortDirection.Desc}},Lani.Paginator=class{constructor(){this.page=1,this.itemsPerPage=10,this.scroll=0,this.enabled=!0,this.count=null}get indices(){var t=this.scroll+(this.page-1)*this.itemsPerPage;let e=this.scroll+this.page*this.itemsPerPage;return{start:t,end:e=null!==this.count&&e>this.count?this.count:e}}get pages(){return null===this.count?null:Math.ceil(this.count/this.itemsPerPage)}},Lani.DataSourceReturnType={Array:"Array",DataSet:"DataSet"},Lani.DataSource=class{constructor(){this.filters=[],this.groups=[],this.sorts=[],this.paginator=new Lani.Paginator,this.paginator.enabled=!1}async update(){}async get(){}},Lani.InMemoryDataSource=class extends Lani.DataSource{constructor(t){super(),this.paginator.enabled=!1,this.array=t,this.product=null}async get(){if(null===this.product)return null;if(null===this.paginator||!this.paginator.enabled)return this.product;var t=this.paginator.indices;return this.product.slice(t.start,t.end)}setArray(t){this.array=t,this.update()}async update(){return this.product=Lani.DataSet.from(this.array),this.product.filter(this.filters),this.product.group(this.groups),this.product.sort(this.sorts),this.returnType===Lani.DataSourceReturnType.Array&&(this.product=this.product.toArray()),this.paginator.length=this.product.length,this.product}},Lani.DownloadedDataSource=class extends Lani.DataSource{constructor(t=null){super(),this.source=t,this.fetchOptions={},this.inMem=new Lani.InMemoryDataSource}set groups(t){this.inMem&&(this.inMem.groups=t)}get groups(){if(this.inMem)return this.inMem.groups}async update(){await this.inMem.update()}async get(){return null===await this.inMem.get()&&await this.download(),this.inMem.get()}async download(){if(null===this.source)throw"Tried to download from a null source";this.inMem.setArray(await(await fetch(this.source,this.fetchOptions)).json())}},Lani.DataElement=class extends Lani.Element{constructor(){super()}},Lani.DataDisplayGrouping=class{constructor(){this.elements=[]}connect(t){this.elements.push(t)}disconnect(e){this.elements=this.elements.filter(t=>t!==e)}},Lani.group=(e,t)=>{if(0===t.length)return e;let i={};var n=t.shift();for(let t=0;t<e.length;t++){var s=e[t][n];i[s]?i[s].push(e.slice(t,t+1)[0]):i[s]=e.slice(t,t+1)}if(t.length)for([key,value]of Object.entries(i))i[key]=Lani.group(value,t.slice());return i},Lani.ungroup=t=>{let e=[];return Array.isArray(t)?e.push(...t.slice()):Object.values(t).forEach(t=>{e.push(...Lani.ungroup(t))}),e},Lani.initCap=t=>"string"!=typeof t||0===t.length?t:t.includes(" ")?Lani.search.splitWords(t).map(Lani.initCap).join(" "):t[0].toLocaleUpperCase()+t.substring(1).toLocaleLowerCase(),Lani.containsLowercaseLetters=t=>t!==t.toLocaleUpperCase(),Lani.undoCamelCase=t=>"string"!=typeof t||0===t.length?t:t.includes(" ")?Lani.search.splitWords(t).map(Lani.undoCamelCase).join(" ").toLocaleLowerCase():Lani.containsLowercaseLetters(t)?t.split(/(?=[A-Z])/g).join(" ").toLocaleLowerCase():t,Lani.DataNamePrettifier=class{constructor(){this.enabled=!0,this.replaceUnderscoreWithSpace=!0,this.undoCamelCase=!0,this.normalizeCasing=!0}prettify(t){if(!1===this.enabled)return t;let e=t;return this.replaceUnderscoreWithSpace&&(e=e.replaceAll("_"," ")),this.undoCamelCase&&(e=Lani.undoCamelCase(e)),e=this.normalizeCasing?Lani.initCap(e):e}},Lani.prettifyDataName=(t,e={})=>{let i=new Lani.DataNamePrettifier;return Object.assign(i,e),i.prettify(t)},Lani.search={},Lani.search.exact=(e,t)=>t.filter(t=>t===e),Lani.search.includes=(t,i,e=!0)=>{if(e){let e=t.toLowerCase();return i.filter(t=>t.toLowerCase().includes(e))}},Lani.search.splitWords=t=>t.match(/\b(\w+)'?(\w+)?\b/g),Lani.search.levenshtein=(t,e)=>0===t.length?e.length:0===e.length?t.length:t[0]===e[0]?Lani.search.levenshtein(Lani.search.levenshteinTail(t),Lani.search.levenshteinTail(e)):1+Math.min(Lani.search.levenshtein(Lani.search.levenshteinTail(t),e),Lani.search.levenshtein(t,Lani.search.levenshteinTail(e)),Lani.search.levenshtein(Lani.search.levenshteinTail(t),Lani.search.levenshteinTail(e))),Lani.search.levenshteinTail=t=>t.slice(1),Lani.installedModules.push("lani-context"),Lani.customContextMenu=(t,e,i,a=!1)=>{let o=!1;for(let t=0;t<e.length;t++)if(null!==e[t].icon){o=!0;break}t.addEventListener("contextmenu",t=>{t.preventDefault();let n=new Lani.ContextElement,s=document.createElement("div");s.className="l-context-element",n.containerElement=s;for(let t=0;t<e.length;t++){let i=e[t];if(i.isSeparator){let t=document.createElement("div");t.className="l-context-element-item-separator",s.appendChild(t)}else{let t=document.createElement("p"),e=(t.className=a?"l-context-element-item-compact":"l-context-element-item",i.text);o&&(e=null!==i.icon?`<i class="${i.icon} l-context-element-item-icon"></i>`+e:'<div class="l-context-element-item-icon"></div>'+e),t.innerHTML=e,t.addEventListener("click",t=>{i.onAction&&i.onAction(),n.close()}),s.appendChild(t)}}return i&&i(n.containerElement,n),s.style.top=t.layerY+"px",s.style.left=t.layerX+"px",document.body.appendChild(s),n.addListeners(),n})},Lani.ContextElement=class{constructor(t=null){this.containerElement=t,this.relatedElements=[],this.autoClose=!0,this.mousedownListener=t=>this.handleWindowEvent(t),this.scrollListener=t=>this.handleWindowEvent(t),this.blurListener=t=>this.handleWindowEvent(t),this.onClickAway=null,this.onClose=null}addListeners(){window.addEventListener("mousedown",this.mousedownListener),window.addEventListener("scroll",this.scrollListener),window.addEventListener("blur",this.blurListener)}removeListeners(){window.removeEventListener("mousedown",this.mousedownListener),window.removeEventListener("scroll",this.scrollListener),window.removeEventListener("blur",this.blurListener)}handleWindowEvent(e){e=e.target;if(e!==this.containerElement){let t=e;for(;t=t.parentNode;)if(t===this.containerElement||-1!==this.relatedElements.indexOf(t))return;this.onClickAway&&this.onClickAway(),this.autoClose&&this.close()}}close(){let t=null;this.onClose&&(t=this.onClose()),"undefined"!=typeof cancel&&!1===t||(this.removeListeners(),this.containerElement&&this.containerElement.remove())}},Lani.ContextMenuItem=class{constructor(t,e=null,i=null){this.text=t,this.icon=i,this.isSeparator=!1,this.onAction=e}},Lani.ContextMenuSeparator=class extends Lani.ContextMenuItem{constructor(){super(),this.isSeparator=!0}},Lani.installedModules.push("lani-extras"),Lani.GibberishLength={Short:2,Medium:15,Long:100,VeryLong:200},Lani.GibberishText=["apple","mint","Florida","soda","leather","the","a","to","bubblegum","bravery","environment","tea","water","cake","chicken","wave","ice","lamp","sheep","whereas","windy","tall","tree","lock","finished","image","daytime","of","work","cow","door","coin","by","blue","half","red","stone","inside","loud","frozen","happy","scared","burnt","bread","slide","increase","taste"],Lani.gibberish=e=>{let i=[];for(let t=0;t<e;t++)i.push(Lani.GibberishText[Math.floor(Math.random()*Lani.GibberishText.length)]);return i.join(" ")},Lani.installedModules.push("lani-animations"),Lani.animations=[],Lani.previousTime=null,Lani.windowBlurred=!1,Lani.randomSign=()=>{return Math.random()<.5?-1:1},Lani.animationWindowBlurHandler=t=>{Lani.previousTime=null,Lani.windowBlurred=!0},Lani.animationWindowFocusHandler=t=>{Lani.windowBlurred=!1},Lani.animationLoadHandler=t=>{Lani.startAnimationLoop()},Lani.animate=t=>{if(!Lani.windowBlurred){let e=0;1e3<(e=null!==Lani.previousTime?t-Lani.previousTime:e)&&(e=1e3),Lani.previousTime=t,Lani.animations.forEach(t=>t.animate(e))}requestAnimationFrame(Lani.animate)},Lani.animationLoopStarted=!1,Lani.startAnimationLoop=()=>{Lani.animationLoopStarted||(requestAnimationFrame(Lani.animate),Lani.animationLoopStarted=!0)},Lani.fillCircle=(t,e,i,n)=>{n<=0||(t.beginPath(),t.arc(e,i,n,0,2*Math.PI),t.fill())},Lani.drawLine=(t,e,i,n,s,a=null)=>{a&&(t.lineWidth=a),t.beginPath(),t.moveTo(e,i),t.lineTo(n,s),t.stroke()},Lani.rads=t=>t*Math.PI/180,Lani.xOnCircle=(t,e)=>t*Math.cos(Lani.rads(e)),Lani.yOnCircle=(t,e)=>t*Math.sin(Lani.rads(e)),Lani.pointOnCircle=(t,e)=>({x:Lani.xOnCircle(t,e),y:Lani.yOnCircle(t,e)}),Lani.circumference=t=>2*Math.PI*t,Lani.goldenRatio=1.618,Lani.Animation=class{constructor(t){this.canvas=t,this.canvas&&(this.ctx=this.canvas.getContext("2d"))}canvasSize(){this.canvas.width==this.canvas.offsetWidth&&this.canvas.height==this.canvas.offsetHeight||(this.canvas.width=this.canvas.offsetWidth,this.canvas.height=this.canvas.offsetHeight)}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}animate(t){}},Lani.AnimationEntity=class{constructor(t=1,e=1){this.sizeMultiplier=t,this.speedMultiplier=e,this.reset()}reset(){this.size=1,this.x=0,this.y=0,this.velX=0,this.velY=0,this.rotationDeg=0,this.birth=performance.now()}randomize(){this.size=(Math.random()/2+.5)*this.sizeMultiplier,this.x=Math.random(),this.y=Math.random(),this.velX=this.randomVelocity()*Lani.randomSign(),this.velY=this.randomVelocity()*Lani.randomSign()}randomVelocity(){return(.0025+Math.random()/250)*this.speedMultiplier}},window.addEventListener("load",Lani.animationLoadHandler),window.addEventListener("blur",Lani.animationWindowBlurHandler),window.addEventListener("focus",Lani.animationWindowFocusHandler),Lani.requireModule("lani-animations"),Lani.BubbleAnimation=class extends Lani.Animation{constructor(t,e,i,n){super(t),null===e&&(e=5),null===n&&(n=1),this.sizeMultiplier=i=null===i?1:i,this.speedMultiplier=n,this.bubbles=[];for(let t=0;t<e;t++){let t=new Lani.AnimationEntity(this.sizeMultiplier,this.speedMultiplier);t.randomize(),this.bubbles.push(t)}}animate(n){let s=this.canvas.offsetWidth,a=this.canvas.offsetHeight,o=(this.canvasSize(),this.ctx);this.clear(),o.fillStyle="rgba(255, 255, 255, 0.3)",this.bubbles.forEach(t=>{var e,i;1<=t.x&&0<t.velX&&(t.velX=-t.randomVelocity()),t.x<=0&&t.velX<0&&(t.velX=t.randomVelocity()),1<=t.y&&0<t.velY&&(t.velY=-t.randomVelocity()),t.y<=0&&t.velY<0&&(t.velY=t.randomVelocity()),t.x+=t.velX*(n/250),t.y+=t.velY*(n/250),i=80*t.size,e=s*t.x,t=a*t.y,Lani.fillCircle(o,e,t,i)})}},Lani.BubblesElement=class extends Lani.Element{constructor(){super(),this.animation=null}async setup(){await this.useTemplate(Lani.templatesPath(),"#lani-animation-basic");let t=this.getAttribute("count"),e=(t=t&&""!=t?parseInt(t):null,this.getAttribute("size")),i=(e=e&&""!=e?parseFloat(e):null,this.getAttribute("speed"));i=i&&""!=i?parseFloat(i):null,this.animation=new Lani.BubbleAnimation(this.shadow.getElementById("screen"),t,e,i),Lani.animations.push(this.animation)}connectedCallback(){this.setup()}},Lani.regEl("lani-bubbles",Lani.BubblesElement),Lani.requireModule("lani-animations"),Lani.DotGridAnimation=class extends Lani.Animation{constructor(t,e,i){null===e&&(e=25),null===i&&(i=4),super(t),this.location=0,this.dotsDensity=e,this.dotRadius=i}animate(t){var e=this.canvas.width,i=this.canvas.height;this.canvasSize(),this.location+=t/250;let n=this.ctx;this.clear(),n.fillStyle="rgba(255, 255, 255, 0.3)";var s=Math.floor(e/this.dotsDensity),a=Math.floor(i/this.dotsDensity);for(let e=0;e<s;e++)for(let t=0;t<a;t++){var o=4*Math.sin((this.location-e)/3),o=Math.max(1,o+this.dotRadius);Lani.fillCircle(n,Math.floor(this.dotsDensity/2+e*this.dotsDensity),Math.floor(this.dotsDensity/2+t*this.dotsDensity),o)}}},Lani.DotGridElement=class extends Lani.Element{constructor(){super(),this.animation=null}async setup(){await this.useTemplate(Lani.templatesPath(),"#lani-animation-basic");let t=this.getAttribute("density"),e=(t=t&&""!=t?parseInt(t):null,this.getAttribute("size"));e=e&&""!=e?parseFloat(e):null;var i=new Lani.DotGridAnimation(this.shadow.getElementById("screen"),t,e);Lani.animations.push(i)}connectedCallback(){this.setup()}},Lani.regEl("lani-dots",Lani.DotGridElement),Lani.requireModule("lani-animations"),Lani.TreeBranch=class extends Lani.AnimationEntity{constructor(){super(),this.length=.25,this.thickness=1,this.children=[],this.parent=null,this.branchSpread=25,this.branchLengthRatio=1.5,this.angleRandomness=35,this.lengthRandomness=.6}randomAngleDeviation(){return this.angleRandomness/2-Math.random()*this.angleRandomness}randomLengthDeviation(){return this.lengthRandomness/2-Math.random()*this.lengthRandomness}generateChildren(i=10){if(!(i<=0)){this.thickness=i;let t=new Lani.TreeBranch,e=new Lani.TreeBranch;t.rotationDeg=this.rotationDeg-this.branchSpread+this.randomAngleDeviation(),t.length=this.length/(this.branchLengthRatio+this.randomLengthDeviation()),e.rotationDeg=this.rotationDeg+this.branchSpread+this.randomAngleDeviation(),e.length=this.length/(this.branchLengthRatio+this.randomLengthDeviation()),this.children.push(t),this.children.push(e),i--,this.children.forEach(t=>t.generateChildren(i))}}render(e,t,i,n){var s=Lani.pointOnCircle(n*this.length,this.rotationDeg);let a=t+s.x,o=i+s.y;e.lineWidth=this.thickness,Lani.drawLine(e,t,n-i,a,n-o),this.children.forEach(t=>t.render(e,a,o,n))}},Lani.TreeAnimation=class extends Lani.Animation{constructor(t){super(t),this.root=new Lani.TreeBranch,this.root.generateChildren()}animate(t){var e=this.canvas.offsetWidth,i=this.canvas.offsetHeight;this.canvasSize();let n=this.ctx;this.clear(),n.strokeStyle="rgb(255, 255, 255)",this.root.render(n,e/2,0,i)}},Lani.TreeElement=class extends Lani.Element{constructor(){super(),this.animation=null}async setup(){await this.useTemplate(Lani.templatesPath(),"#lani-animation-basic"),this.animation=new Lani.TreeAnimation(this.shadow.getElementById("screen")),Lani.animations.push(this.animation)}connectedCallback(){this.setup()}},Lani.regEl("lani-tree",Lani.TreeElement),Lani.requireModule("lani-animations"),Lani.installedModules.push("lani-svg"),Lani.svg={},Lani.svg.arc=(t,e,i,n,s)=>{n=Lani.pointOnCircle(i,n),s=Lani.pointOnCircle(i,s);return`M ${t+n.x} ${e+n.y} `+`A ${i} ${i} 0 0 1 `+(t+s.x)+" "+(e+s.y)},Lani.svg.relative=t=>t.toLowerCase(),Lani.svg.absolute=t=>t.toUpperCase(),Lani.ElementEvents.DataDownloaded="lani::data-downloaded",Lani.ElementEvents.DataReady="lani::data-ready",Lani.DataSourceElementHandlers={},Lani.DataSourceElementHandlers.download=t=>{t.dataSource=new Lani.DownloadedDataSource(t.getAttribute("source"))},Lani.DataSourceElement=class extends Lani.Element{constructor(){super(),this.dataSource=null,this.dataReady=!1,this.slotElement=null}connectedCallback(){this.setupNonDOM(),this.slotElement=Lani.c("slot"),this.shadow.appendChild(this.slotElement),this.slotElement.addEventListener("slotchange",t=>{this.discoverGroups()});let t=this.getAttribute("type"),e=(null===t&&(console.warn('No data source type present, assuming "download"',this),t="download"),Lani.DataSourceElementHandlers[t]);e?e(this):console.error(`No handler found for data source element (type: ${t})`,this)}discoverGroups(){this.dataSource.groups=Array.from(this.querySelectorAll("lani-data-group")).map(t=>t.groupKey)}dataReady(){this.dataReady=!0,this.emit(Lani.ElementEvents.DataReady)}dataDownloaded(){this.dataReady(),this.emit(Lani.ElementEvents.DataReady)}async get(){return this.dataSource.get()}},Lani.regEl("lani-data-source",Lani.DataSourceElement),Lani.DataGroupElement=class extends Lani.Element{get groupKey(){return this.getAttribute("group")??this.getAttribute("group-key")??this.innerText}},Lani.regEl("lani-data-group",Lani.DataGroupElement),Lani.installedModules.push("lani-dialogs"),Lani.currentDialogLayer=null,Lani.DialogLayer=class extends Lani.Element{constructor(){super(),this.dialogs=[],this.nextLayer=1,this.focusStack=[],this.resizeObserver=new ResizeObserver(()=>{for(var t of this.dialogs)t.doPosition()}),this.resizeObserver.observe(this),this.setup()}async setup(){await this.useTemplate(Lani.templatesPath(),"#lani-dialog-layer"),this.addEventListener(Lani.ElementEvents.Close,t=>{t.target!==this&&this.checkEmpty()})}showDialog(t){this.dialogs.push(t),this.appendChild(t),t.doPosition()}removeDialog(e){this.dialogs=this.dialogs.filter(t=>t!==e),this.checkEmpty()}checkEmpty(){0==this.dialogs.length&&this.close()}show(t){(t=t||document.body).appendChild(this),this.emit(Lani.ElementEvents.Show)}close(){this.parentNode&&this.parentNode.removeChild(this),this.emit(Lani.ElementEvents.Close)}},Lani.Dialog=class extends Lani.Element{#dialogTitle;#isMaximized;#originalDimensions;#closeEnabled;constructor(){super(),this.#dialogTitle=null,this.verticalAlignment=Lani.Position.Middle,this.horizontalAlignment=Lani.Position.Middle,this.movementOffsetLeft=0,this.movementOffsetTop=0,this.allowMovePastBorders=!1,this.resizeObserver=new ResizeObserver(()=>{this.doPosition()}),this.resizeObserver.observe(this),this.returnValue=null,this.#isMaximized=!1,this.#originalDimensions={width:null,height:null},this.#closeEnabled=!0,this.setup()}async setup(){this.linkStyle(Lani.contentRoot+"/dialogs.css"),await this.useTemplate(Lani.templatesPath(),"#lani-dialog"),this.shadow.getElementById("close-button").addEventListener("click",()=>{this.#closeEnabled&&this.close()}),this.shadow.getElementById("maximize-button").addEventListener("click",()=>{this.toggleMaximize()});let e=this.shadow.getElementById("status-bar");e.addEventListener("mousedown",t=>{if(t.target===e&&!this.#isMaximized){let i=t.clientX-this.offsetLeft,n=t.clientY-this.offsetTop,e=t=>{var e=t.clientX-i,t=t.clientY-n;this.moveTo(e,t)},s=t=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",s)};window.addEventListener("mousemove",e),window.addEventListener("mouseup",s)}}),this.#resizeHandle("resize-top-left",t=>{var e=t.clientX-this.offsetLeft,t=t.clientY-this.offsetTop,i=this.offsetWidth,n=this.offsetHeight;this.resize(this.offsetWidth-e,this.offsetHeight-t),this.moveBy(i-this.offsetWidth,n-this.offsetHeight)}),this.#resizeHandle("resize-top",t=>{var t=t.clientY-this.offsetTop,e=this.offsetHeight;this.resize(null,this.offsetHeight-t),this.moveBy(null,e-this.offsetHeight)}),this.#resizeHandle("resize-top-right",t=>{var e=t.clientX-this.offsetLeft,t=t.clientY-this.offsetTop;this.resize(e,this.offsetHeight-t),this.moveBy(null,t)}),this.#resizeHandle("resize-right",t=>{t=t.clientX-this.offsetLeft;this.resize(t,null)}),this.#resizeHandle("resize-bottom-right",t=>{var e=t.clientX-this.offsetLeft,t=t.clientY-this.offsetTop;this.resize(e,t)}),this.#resizeHandle("resize-bottom",t=>{t=t.clientY-this.offsetTop;this.resize(null,t)}),this.#resizeHandle("resize-bottom-left",t=>{var e=t.clientX-this.offsetLeft,t=t.clientY-this.offsetTop;this.resize(this.offsetWidth-e,t),this.moveBy(e,null)}),this.#resizeHandle("resize-left",t=>{var t=t.clientX-this.offsetLeft,e=this.offsetWidth;this.resize(this.offsetWidth-t,null),this.moveBy(e-this.offsetWidth,null)})}#resizeHandle(t,n){let e=this.shadow.getElementById(t);e.addEventListener("mousedown",t=>{if(!this.#isMaximized){let e=t=>{t.preventDefault(),t.stopPropagation(),n(t)},i=t=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",i)};window.addEventListener("mousemove",e),window.addEventListener("mouseup",i)}})}set dialogTitle(t){this.#dialogTitle=t,this.shadow.getElementById("title").innerHTML=this.#dialogTitle}htmlContent(t){this.shadow.getElementById("content").innerHTML=t}doPosition(){this.#isMaximized?(this.style.top="0px",this.style.left="0px"):Lani.positionElement(this,this.horizontalAlignment,this.verticalAlignment,this.movementOffsetLeft,this.movementOffsetTop)}addButton(t,e){let i=Lani.create("button",{slot:"buttons",parent:this.shadow.getElementById("buttons-slot"),innerHTML:t});return e&&i.addEventListener("click",e),i}addCloseButton(t="Close",e=!1){return e?this.addActionButton(t,()=>this.close()):this.addButton(t,()=>this.close())}addActionButton(t,e){let i=this.addButton(t,e);return i.className+=" l-button-action",i}moveTo(t,e){this.staticPosition(),this.allowMovePastBorders||(null!==e&&e<0&&(e=0),null!==(t=null!==t&&t<0?0:t)&&t+this.offsetWidth>=this.parentNode.offsetWidth&&(t=Math.max(0,this.parentNode.offsetWidth-this.offsetWidth)),null!==e&&e+this.offsetHeight>=this.parentNode.offsetHeight&&(e=Math.max(0,this.parentNode.offsetHeight-this.offsetHeight))),null!==t&&(this.movementOffsetLeft=t),null!==e&&(this.movementOffsetTop=e),this.doPosition()}moveBy(t,e){this.staticPosition(),null!==t&&(this.movementOffsetLeft+=t),null!==e&&(this.movementOffsetTop+=e),this.doPosition()}staticPosition(){this.horizontalAlignment!==Lani.Position.Absolute&&(this.horizontalAlignment=Lani.Position.Absolute,this.movementOffsetLeft=this.offsetLeft),this.verticalAlignment!==Lani.Position.Absolute&&(this.verticalAlignment=Lani.Position.Absolute,this.movementOffsetTop=this.offsetTop)}resize(t,e){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),null!==t&&(this.style.width=t+"px"),null!==e&&(this.style.height=e+"px")}makeSizeFixed(){this.style.width=this.offsetWidth+"px",this.style.height=this.offsetHeight+"px"}toggleMaximize(){this.#isMaximized?this.restore():this.maximize()}hideResizeHandles(){this.shadow.querySelectorAll(".l-dialog-resize-handle").forEach(t=>{t.style.display="none"})}showResizeHandles(){this.shadow.querySelectorAll(".l-dialog-resize-handle").forEach(t=>{t.style.display="block"})}disableMaximize(){this.shadow.getElementById("maximize-button").style.display="none"}enableMaximize(){this.shadow.getElementById("maximize-button").style.display="block"}maximize(){this.#isMaximized||(this.#isMaximized=!0,this.style.borderRadius="0px",this.#isMaximized=!0,this.#originalDimensions.width=this.style.width,this.#originalDimensions.height=this.style.height,this.style.width="100%",this.style.height="100%",this.shadow.querySelector("#maximize-button > lani-icon").setIcon("window-restore"),this.hideResizeHandles(),this.doPosition())}restore(){this.#isMaximized&&(this.#isMaximized=!1,this.style.borderRadius="var(--lani-rounded)",this.style.width=this.#originalDimensions.width,this.style.height=this.#originalDimensions.height,this.shadow.querySelector("#maximize-button > lani-icon").setIcon("expand"),this.showResizeHandles(),this.doPosition())}enableClose(){this.#closeEnabled=!0,this.shadow.getElementById("close-button").disabled=!1}disableClose(){this.#closeEnabled=!1,this.shadow.getElementById("close-button").disabled=!0}close(){this.emit(Lani.ElementEvents.Close),this.parentNode&&(this.parentNode.remove(this),"LANI-DIALOG-LAYER"==this.parentNode.tagName&&this.parentNode.removeDialog(this))}},Lani.showDialog=async t=>{null===Lani.currentDialogLayer&&(Lani.currentDialogLayer=await Lani.waitForElement("lani-dialog-layer"),document.body.appendChild(Lani.currentDialogLayer),Lani.currentDialogLayer.addEventListener(Lani.ElementEvents.Close,t=>{Lani.currentDialogLayer=null})),Lani.currentDialogLayer.showDialog(t)},Lani.alert=async(t,e="Webpage Dialog")=>{let i=await Lani.waitForElement("lani-dialog");i.content=t,i.dialogTitle=e,i.style.minWidth="250px",i.style.minHeight="150px",i.addCloseButton("Ok"),i.htmlContent(`<div class="l-alert-content"><p class="l-no-spacing">${t}</p></div>`),await Lani.showDialog(i)},Lani.regEl("lani-dialog-layer",Lani.DialogLayer),Lani.regEl("lani-dialog",Lani.Dialog),Lani.installedModules.push("lani-icons"),Lani.IconResolver=class{constructor(){}resolve(t,e,i=0){}},Lani.FontAwesomeIconResolver=class extends Lani.IconResolver{constructor(){super(),this.defaultStyle="fa-solid",this.injectDefaultStyle=!0}resolve(t,e,i={}){t.className=t.className.split(" ").filter(t=>!t.startsWith("fa-")).join(" "),0!=e.length&&(this.defaultStyle,"string"==typeof i.style&&i.style,this.injectDefaultStyle&&(t.className+=this.defaultStyle+" "),Array.isArray(e)?t.className+=e.map(t=>"fa-"+t).join(" "):t.className+="fa-"+e)}},Lani.iconResolver=new Lani.FontAwesomeIconResolver,Lani.IconElement=class extends Lani.Element{constructor(){super(!1)}setIcon(t){-1!==t.indexOf(",")&&(t=t.split(",")),Lani.iconResolver.resolve(this,t)}static get observedAttributes(){return["icon"]}attributeChangedCallback(t,e,i){"icon"==t&&this.setIcon(i)}},Lani.regEl("lani-icon",Lani.IconElement),Lani.PaginatorElement=class extends Lani.Element{constructor(){super(),this.setup()}async setup(){await this.useTemplate(Lani.templatesPath(),"#lani-paginator"),this.ready()}nextPage(){this.emit("lani::next-page")}lastPage(){this.emit("lani::last-page")}previousPage(){this.emit("lani::previous-page")}firstPage(){this.emit("lani::first-page")}},Lani.regEl("lani-paginator",Lani.PaginatorElement),Lani.requireModule("lani-svg"),Lani.ArcElement=class extends Lani.DataElement{constructor(){super(),this.setup(),this.svg=null,this.background=null,this.foreground=null}async setup(){await this.useDefaultTemplate("lani-arc"),this.svg=this.shadow.querySelector("svg"),this.background=this.shadow.getElementById("background"),this.foreground=this.shadow.getElementById("foreground"),this.updateValue(50)}updateValue(t){var e=Lani.circumference(parseFloat(this.background.getAttribute("r")));this.background.setAttribute("stroke-dasharray",e),this.foreground.setAttribute("stroke-dasharray",e),this.background.style.strokeDashoffset=e/2*(1+t/100),this.background.style.transform=`rotate(${t/100*180-180}deg)`,this.foreground.style.strokeDashoffset=e/2*(1+(100-t)/100)}},Lani.regEl("lani-arc",Lani.ArcElement),Lani.OnOffElement=class extends Lani.Element{constructor(){super(),this.state="on",this.onText="ON",this.offText="OFF",this.setup()}async setup(){await this.useDefaultTemplate("lani-on-off"),this.shadow.getElementById("circle").addEventListener("click",t=>{this.toggle()}),this.state=this.getAttribute("state")??this.state,this.onText=this.getAttribute("on-text")??this.onText,this.offText=this.getAttribute("off-text")??this.offText,this.displayState()}toggle(){this.state="on"==this.state?"off":"on",this.displayState(),this.emit(Lani.ElementEvents.StateChange,{state:this.state,element:this})}displayState(){"on"==this.state?(this.shadow.getElementById("ring-outer").style.borderColor="var(--lani-on-off-state-on)",this.shadow.querySelector("div#content p").innerHTML=this.onText):(this.shadow.getElementById("ring-outer").style.borderColor="var(--lani-on-off-state-off)",this.shadow.querySelector("div#content p").innerHTML=this.offText)}},Lani.regEl("lani-on-off",Lani.OnOffElement),Lani.installedModules.push("lani-tables"),Lani.TableColumnFormatting=class{constructor(){this.width=null,this.cellCasing=null,this.headerCasing=null,this.trimData=!1,this.nullText=null,this.headerAlign=null,this.style=null,this.headerStyle=null}},Lani.TableColumnBase=class{constructor(t){this.formatting=new Lani.TableColumnFormatting,this.name=t}renderHeader(t){}render(t,e){}},Lani.TableFormatter=class{format(t,e){}},Lani.Condition=class{isMet(){return!0}},Lani.ConditionalTableFormatter=class extends Lani.TableFormatter{constructor(){super(),this.condition=null}checkCondition(t){return null===this.condition||(this.condition instanceof Lani.Condition?this.condition.isMet(t):this.condition(t))}},Lani.TableColumn=class extends Lani.TableColumnBase{constructor(t,e,i=null){super(t),this.sourceName=e,this.formatters=[],this.table=i}getFormattingProperty(t){return null!==this.table?this.formatting[t]??this.table.columnFormatting[t]:this.formatting[t]}renderHeader(t){var e=this.getFormattingProperty("headerStyle"),e=(null!==e&&(t.style.cssText=e),this.getFormattingProperty("headerAlign"));null!==e&&(t.style.textAlign=e),t.innerHTML=this.name}renderColGroup(){let t=Lani.c("col");return null!==this.formatting.style&&(t.style.cssText=this.formatting.style),null!==this.formatting.width&&(t.style.width=this.formatting.width),t}render(t,e){t.isAGroup?e.innerHTML=t.groupValue:e.innerHTML=t[this.sourceName];for(var i of this.formatters)(!(i instanceof Lani.ConditionalTableFormatter)||i.checkCondition(t))&&i.format(t,e)}},Lani.TableColumnElement=class extends Lani.Element{get column(){let t=new Lani.TableColumn;return t.name=this.getAttribute("name")??(""===this.innerText?null:this.innerText)??(""===this.innerHTML?null:this.innerHTML),t.sourceName=this.getAttribute("source-name")??t.name,Lani.TableColumnElement.parseFormatting(this,t.formatting),t}static parseFormatting(t,e){e.headerAlign=t.getAttribute("header-align"),e.width="LANI-TABLE"==t.tagName?t.getAttribute("col-width"):t.getAttribute("width"),e.style="LANI-TABLE"==t.tagName?t.getAttribute("col-style"):t.getAttribute("style"),e.headerStyle=t.getAttribute("header-style")}},Lani.regEl("lani-table-column",Lani.TableColumnElement),Lani.TableRenderer=class{constructor(t){this.table=t}render(e){if(0!==this.table.columns.length){let t=Lani.c("table","l-table");this.table.renderHeaders&&(i=this.#renderHeaders(),t.appendChild(i));var i=this.#renderColGroup(),i=(t.appendChild(i),this.#renderBody(e));t.appendChild(i),this.table.setBody(t)}}#renderHeaders(){var t,e=Lani.c("thead"),i=Lani.c("tr",null,e);for(t of this.table.columns){var n=Lani.c("th",null,i);t.renderHeader(n)}return e}#renderColGroup(){let t=Lani.c("colgroup");for(var e of this.table.columns)t.appendChild(e.renderColGroup());return t}#renderBody(t){if(t.isGrouped)return this.#renderGroupedBody(t);let e=Lani.c("tbody");for(var i of t.rows){let t=Lani.c("tr");for(var n of this.table.columns){var s=Lani.c("td");n.render(i.data,s),t.appendChild(s)}e.appendChild(t)}return e}#renderGroupedBody(t){var e=Lani.c("tbody");try{this.table.validateColumnOrder();for(var i of t.rows)this.#renderGroupedPartial(e,0,i)}catch(t){console.error(t)}return e}#renderGroupedPartial(n,s,a,o=null){if(a.isAGroup){var r,l=o??Lani.c("tr",null,n);let t=Lani.c("td",null,l),e=(t.rowSpan=a.count,this.table.columns[s]),i=(e.render(a,t),!0);for(r of a.rows)this.#renderGroupedPartial(n,s+1,r,i?l:null),i=!1}else if(a.isGrouped)for(var t of a.rows)this.#renderGroupedPartial(n,s,t,o);else{var i=o??Lani.c("tr",null,n);for(let e=s;e<this.table.columns.length;e++){let t=this.table.columns[e];var h=Lani.c("td",null,i);t.render(a.data,h)}}}},Lani.TableTemplates={},Lani.TableTemplates.Loading=`<style>

</style>
<div id="loading-container">
    <h2 id="loading-text">Loading your table...</h2>
    <p id="loading-subtext">Hang tight</p>
    <lani-icon id="loading-icon" icon="table"></lani-icon>
</div>
`,Lani.TableTemplates.NoDataFound="<p>No Data Found</p>",Lani.ElementEvents.TableColumnAdded="lani::table-column-added",Lani.TableElement=class extends Lani.DataElement{#title;constructor(){super(),this.renderHeaders=!0,this.renderer=new Lani.TableRenderer(this),this.dataSource=null,this.autoParseColumns=!0,this.columns=[],this.columnFormatting=new Lani.TableColumnFormatting,this.ignoreColumns=[],this.columnNamePrettifier=new Lani.DataNamePrettifier,this.loadingTemplate=Lani.TableTemplates.Loading,this.noDataFoundTemplate=Lani.TableTemplates.NoDataFound,this.setup()}async setup(){await this.useTemplate(Lani.templatesPath(),"#lani-table",!1),this.linkStyle(Lani.contentRoot+"/tables.css"),Lani.TableColumnElement.parseFormatting(this,this.columnFormatting),this.doDiscovery(),this.renderTable(),this.ready()}get title(){return this.#title}set title(t){this.#title=t,Lani.useGenericTemplate(this.#title,this.shadow.getElementById("title"),!1)}async renderTable(){var t;null!==this.renderer&&null!==this.dataSource&&(t=await this.dataSource.get(),this.autoParseColumns&&0===this.columns.length&&this.parseColumns(t),this.renderer.render(t))}setBody(t){var e=this.shadow.getElementById("body");Lani.useGenericTemplate(t,e,!1)}showLoading(){this.setBody(this.loadingTemplate)}showNoDataFound(){}doDiscovery(){this.discoverTitle(),this.discoverColumns(),this.discoverDataSource()}discoverColumns(){let t=Array.from(this.querySelectorAll("lani-table-column"));if(0!==t.length)for(var e of t.map(t=>t.column))this.addColumn(e)}discoverDataSource(){var t=this.querySelector("lani-data-source");t&&(this.dataSource=t.dataSource)}discoverTitle(){let t=null;var e=this.querySelector("template[slot='title']");return e&&(t=e),this.title=t}addColumn(t){this.columns.push(t),(t.table=this).emit(Lani.ElementEvents.TableColumnAdded,{column:t})}parseColumns(t){this.columns=[];for(var i of t.rows)for(let e of Object.keys(i.data))this.ignoreColumns.includes(e)||this.columns.some(t=>t.sourceName===e)||this.addColumn(new Lani.TableColumn(this.columnNamePrettifier.prettify(e),e));return this.columns}validateColumnOrder(){if(this.dataSource.groups.length>this.columns.length)throw"More groups than columns";for(let t=0;t<this.dataSource.groups.length;t++)if(this.dataSource.groups[t]!=this.columns[t].sourceName)throw`Grouped column in wrong order: ${this.columns[t].name} (${this.columns[t].sourceName})`}},Lani.regEl("lani-table",Lani.TableElement),Lani.installedModules.push("lani-testing"),Lani.TestError=class extends Error{constructor(t){super(t)}},Lani.assertEqual=(t,e)=>{if(t!=e)throw new Lani.TestError(t+" should be equal to "+e)},Lani.assertStrictlyEqual=(t,e)=>{if(t!==e)throw new Lani.TestError(t+" should be strictly equal to "+e)},Lani.assertInequal=(t,e)=>{if(t==e)throw new Lani.TestError(t+" should not be equal to "+e)},Lani.assertStrictlyInequal=(t,e)=>{if(t===e)throw new Lani.TestError(t+" should not be strictly equal to "+e)},Lani.assertGreaterThan=(t,e)=>{if(!(e<t))throw new Lani.TestError(t+" should be greater than "+e)},Lani.assertLessThan=(t,e)=>{if(!(t<e))throw new Lani.TestError(t+" should be less than "+e)},Lani.assertGreaterThanEq=(t,e)=>{if(!(e<=t))throw new Lani.TestError(t+" should be greater than or equal to "+e)},Lani.assertLessThanEq=(t,e)=>{if(!(t<=e))throw new Lani.TestError(t+" should be less than or equal to "+e)},Lani.PerformanceTest=class{constructor(){this.iterations=1e6,this.start=null,this.end=null}test(){}get time(){return this.end-this.start}};